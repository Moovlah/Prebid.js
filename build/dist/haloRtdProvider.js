pbjsChunk([262],{490:function(e,t,a){e.exports=a(491)},491:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a.d(t,"storage",function(){return m}),a.d(t,"HALOID_LOCAL_NAME",function(){return g}),a.d(t,"SEG_LOCAL_NAME",function(){return p}),t.addSegmentData=f,t.getSegments=l,t.getSegmentsAsync=b,a.d(t,"haloSubmodule",function(){return y});var d=a(17),o=a(0),n=a(11),i=a(4),r=a(7);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m=Object(r.b)(),g="auHaloId",p="__adgntseg",c=function(e,t,a){var n=t.split("."),r=n.pop(),s=n.reduce(function(e,t){return e[t]=e[t]||{}},e);s[r]=s[r]||a},s={appnexus:function(e,t){c(e,"params.user.segments",[]);var a=[];t.forEach(function(e){void 0!==e.id&&null!=e.id&&a.push(parseInt(e.id))}),e.params.user.segments=e.params.user.segments.concat(a)},generic:function(e,t){e.segments=e.segments||[],Array.isArray(e.segments)&&(e.segments=e.segments.concat(t))}};function f(e,a,t){return e.forEach(function(e){e.hasOwnProperty("bids")&&e.bids.forEach(function(e){try{c(e,"fpd.user.data",[]),Array.isArray(e.fpd.user.data)&&e.fpd.user.data.forEach(function(e){var t=a[e.id]||a[e.name]||[];e.segment=(e.segment||[]).concat(t)})}catch(e){o.logError(e.message)}try{t.params.mapSegments&&t.params.mapSegments[e.bidder]&&a[e.bidder]&&("function"==typeof t.params.mapSegments[e.bidder]?t.params.mapSegments[e.bidder](e,a[e.bidder]):s[e.bidder]&&s[e.bidder](e,a[e.bidder]))}catch(e){o.logError(e.message)}})}),e}function l(e,t,a,n){var r=e.adUnits||Object(d.a)().adUnits;if(a.params.segmentCache){var s=m.getDataFromLocalStorage(p);if(s){var o=JSON.parse(s);if(o.audigent_segments)return f(r,o.audigent_segments,a),void t()}}var i,u=Object(d.a)().getUserIds(),c=m.getDataFromLocalStorage(g);c?(u.haloId=c,b(r,t,a,0,u)):((i=document.createElement("script")).type="text/javascript",i.onload=function(){u.haloId=m.getDataFromLocalStorage(g),b(r,t,a,0,u)},i.src="https://id.halo.ad.gt/api/v1/haloid",document.getElementsByTagName("head")[0].appendChild(i))}function b(n,r,s,e,t){var a={};"object"==u(s)&&null!=s&&(c(s,"params.requestParams",{}),a=s.params.requestParams);Object(i.a)("https://seg.halo.ad.gt/api/v1/rtb_segments",{success:function(e,t){if(200===t.status)try{var a=JSON.parse(e);a&&a.audigent_segments?(f(n,a.audigent_segments,s),r(),m.setDataInLocalStorage(p,JSON.stringify(a))):r()}catch(e){o.logError("unable to parse audigent segment data"),r()}else 204===t.status&&r()},error:function(){r(),o.logError("unable to get audigent segment data")}},JSON.stringify({userIds:t,config:a}),{contentType:"application/json"})}var y={name:"halo",getBidRequestData:l,init:function(e,t){return!0}};Object(n.e)("realTimeData",y)}},[490]);