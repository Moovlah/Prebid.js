pbjsChunk([165],{732:function(e,r,s){e.exports=s(733)},733:function(e,r,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),s.d(r,"spec",function(){return a}),s.d(r,"_checkMediaType",function(){return o}),s.d(r,"_parseAdSlot",function(){return w});var m=s(0),l=s(3),i=s(1),h=s(2);function g(){return(g=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e}).apply(this,arguments)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var E=void 0,I="USD",b={gender:"",yob:"",lat:"",lon:""},y={TITLE:{ID:1,KEY:"title",TYPE:0},IMAGE:{ID:2,KEY:"image",TYPE:0},ICON:{ID:3,KEY:"icon",TYPE:0},SPONSOREDBY:{ID:4,KEY:"sponsoredBy",TYPE:1},BODY:{ID:5,KEY:"body",TYPE:2},CLICKURL:{ID:6,KEY:"clickUrl",TYPE:0},VIDEO:{ID:7,KEY:"video",TYPE:0},EXT:{ID:8,KEY:"ext",TYPE:0},DATA:{ID:9,KEY:"data",TYPE:0},LOGO:{ID:10,KEY:"logo",TYPE:0},SPONSORED:{ID:11,KEY:"sponsored",TYPE:1},DESC:{ID:12,KEY:"data",TYPE:2},RATING:{ID:13,KEY:"rating",TYPE:3},LIKES:{ID:14,KEY:"likes",TYPE:4},DOWNLOADS:{ID:15,KEY:"downloads",TYPE:5},PRICE:{ID:16,KEY:"price",TYPE:6},SALEPRICE:{ID:17,KEY:"saleprice",TYPE:7},PHONE:{ID:18,KEY:"phone",TYPE:8},ADDRESS:{ID:19,KEY:"address",TYPE:9},DESC2:{ID:20,KEY:"desc2",TYPE:10},DISPLAYURL:{ID:21,KEY:"displayurl",TYPE:11},CTA:{ID:22,KEY:"cta",TYPE:12}},D={ICON:1,LOGO:2,IMAGE:3},T=[{id:y.SPONSOREDBY.ID,required:!0,data:{type:1}},{id:y.TITLE.ID,required:!0},{id:y.IMAGE.ID,required:!0}],Y=!1,n={},v={};m._each(y,function(e){n[e.ID]=e.KEY}),m._each(y,function(e){v[e.KEY]=e});var a={code:"pwbid",gvlid:842,supportedMediaTypes:[h.b,h.c],isBidRequestValid:function(e){return!(!e.params||!e.params.siteId)&&(!!m.isStr(e.params.siteId)||(P("siteId is required for bid",e),!1))},buildRequests:function(e,r){var s;r&&r.refererInfo&&(s=r.refererInfo);var i,a,t,n,o,d,c={pageURL:(i=s)&&i.referer?i.referer:window.location.href,refURL:window.document.referrer},p=(a=c,{id:""+(new Date).getTime(),at:1,cur:[I],imp:[],site:{page:a.pageURL,ref:a.refURL,publisher:{}},device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language},user:{},ext:{version:"0.1.0"}}),u=[];if(e.forEach(function(e){(n=m.deepClone(e)).params.adSlot=n.params.adSlot||"",w(n),(c=function(e,r){var s,i,a;for(s in b)b.hasOwnProperty(s)&&(i=e[s])&&("object"===f(a=b[s])&&(i=a.f(i,r)),m.isStr(i)?r[s]=i:P("Ignoring param : "+s+" with value : "+b[s]+", expects string-value, found "+f(i)));return r}(n.params,c)).transactionId=n.transactionId,t=n.params.currency||E,n.params.currency=t,n.params.hasOwnProperty("bcat")&&m.isArray(n.params.bcat)&&(u=u.concat(n.params.bcat));var r=function(e){var r,s={},i={},a="";if(s={id:e.bidId,tagid:e.params.adUnit||void 0,bidfloor:O("bidFloor",e.params.bidFloor),secure:1,bidfloorcur:e.params.currency?O("currency",e.params.currency):I},e.hasOwnProperty("mediaTypes"))for(a in e.mediaTypes)switch(a){case h.b:(r=function(e){var r,s=e.mediaTypes.banner.sizes,i=[];if(s!==E&&m.isArray(s)){if(r={},e.params.width||e.params.height)r.w=e.params.width,r.h=e.params.height;else{if(0===s.length)return r=E,P("Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),r;r.w=parseInt(s[0][0],10),r.h=parseInt(s[0][1],10),s=s.splice(1,s.length-1)}0<s.length&&(i=[],s.forEach(function(e){1<e.length&&i.push({w:e[0],h:e[1]})}),0<i.length&&(r.format=i)),r.pos=0,r.topframe=m.inIframe()?0:1}else P("Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),r=E;return r}(e))!==E&&(s.banner=r);break;case h.c:i.request=JSON.stringify(function(e){var i={assets:[]};for(var r in e){if(e.hasOwnProperty(r)){var s={};if(!(i.assets&&0<i.assets.length&&i.assets.hasOwnProperty(r)))switch(r){case y.TITLE.KEY:e[r].len||e[r].length?s={id:y.TITLE.ID,required:e[r].required?1:0,title:{len:e[r].len||e[r].length,ext:e[r].ext}}:P("Error: Title Length is required for native ad: "+JSON.stringify(e));break;case y.IMAGE.KEY:e[r].sizes&&0<e[r].sizes.length?s={id:y.IMAGE.ID,required:e[r].required?1:0,img:{type:D.IMAGE,w:e[r].w||e[r].width||(e[r].sizes?e[r].sizes[0]:E),h:e[r].h||e[r].height||(e[r].sizes?e[r].sizes[1]:E),wmin:e[r].wmin||e[r].minimumWidth||(e[r].minsizes?e[r].minsizes[0]:E),hmin:e[r].hmin||e[r].minimumHeight||(e[r].minsizes?e[r].minsizes[1]:E),mimes:e[r].mimes,ext:e[r].ext}}:P("Error: Image sizes is required for native ad: "+JSON.stringify(e));break;case y.ICON.KEY:e[r].sizes&&0<e[r].sizes.length?s={id:y.ICON.ID,required:e[r].required?1:0,img:{type:D.ICON,w:e[r].w||e[r].width||(e[r].sizes?e[r].sizes[0]:E),h:e[r].h||e[r].height||(e[r].sizes?e[r].sizes[1]:E)}}:P("Error: Icon sizes is required for native ad: "+JSON.stringify(e));break;case y.VIDEO.KEY:s={id:y.VIDEO.ID,required:e[r].required?1:0,video:{minduration:e[r].minduration,maxduration:e[r].maxduration,protocols:e[r].protocols,mimes:e[r].mimes,ext:e[r].ext}};break;case y.EXT.KEY:s={id:y.EXT.ID,required:e[r].required?1:0};break;case y.LOGO.KEY:s={id:y.LOGO.ID,required:e[r].required?1:0,img:{type:D.LOGO,w:e[r].w||e[r].width||(e[r].sizes?e[r].sizes[0]:E),h:e[r].h||e[r].height||(e[r].sizes?e[r].sizes[1]:E)}};break;case y.SPONSOREDBY.KEY:case y.BODY.KEY:case y.RATING.KEY:case y.LIKES.KEY:case y.DOWNLOADS.KEY:case y.PRICE.KEY:case y.SALEPRICE.KEY:case y.PHONE.KEY:case y.ADDRESS.KEY:case y.DESC2.KEY:case y.DISPLAYURL.KEY:case y.CTA.KEY:s=function(e,r){var s=e.KEY;return{id:e.ID,required:r[s].required?1:0,data:{type:e.TYPE,len:r[s].len,ext:r[s].ext}}}(v[r],e)}}s&&s.id&&(i.assets[i.assets.length]=s)}var a=T.length,t=0;T.forEach(function(e){for(var r=i.assets.length,s=0;s<r;s++)if(e.id==i.assets[s].id){t++;break}}),Y=a!=t;return i}(e.nativeParams)),Y?P("Error: Error in Native adunit "+e.params.adUnit+". Ignoring the adunit. Refer to https://prebid.org/dev-docs/show-native-ads.html for more details."):s.native=i}else P("MediaTypes are Required for all Adunit Configs",e);return function(i,a){var t=-1;"function"!=typeof a.getFloor||l.b.getConfig("pubwise.disableFloors")||[h.b,h.c].forEach(function(e){var r,s;i.hasOwnProperty(e)&&("object"!==f(r=a.getFloor({currency:i.bidFloorCur,mediaType:e,size:"*"}))||r.currency!==i.bidFloorCur||isNaN(parseInt(r.floor))||(s=parseFloat(r.floor),t=-1==t?s:Math.min(s,t)))});i.bidfloor&&(t=Math.max(t,i.bidfloor));i.bidfloor=!isNaN(t)&&0<t?t:E}(s,e),s.hasOwnProperty(h.b)||s.hasOwnProperty(h.c)?s:E}(n);r&&p.imp.push(r)}),0!=p.imp.length){-1!==window.location.href.indexOf("pubwiseTestBid=true")&&(p.test=1),n.params.isTest&&(p.test=Number(n.params.isTest)),p.site.publisher.id=n.params.siteId.trim(),p.user.gender=c.gender?c.gender.trim():E,p.user.geo={},p.user.geo.lat=O("lat",c.lat),p.user.geo.lon=O("lon",c.lon),p.user.yob=O("yob",c.yob),p.device.geo=p.user.geo,p.site.page=p.site.page.trim(),p.site.domain=(o=p.site.page,(d=document.createElement("a")).href=o,d.hostname),"object"===f(l.b.getConfig("content"))&&(p.site.content=l.b.getConfig("content")),"object"===f(l.b.getConfig("device"))&&(p.device=g(p.device,l.b.getConfig("device"))),m.deepSetValue(p,"source.tid",c.transactionId),e[0].schain&&m.deepSetValue(p,"source.ext.schain",e[0].schain),r&&r.gdprConsent&&(m.deepSetValue(p,"user.ext.consent",r.gdprConsent.consentString),m.deepSetValue(p,"regs.ext.gdpr",r.gdprConsent.gdprApplies?1:0)),r&&r.uspConsent&&m.deepSetValue(p,"regs.ext.us_privacy",r.uspConsent),!0===l.b.getConfig("coppa")&&m.deepSetValue(p,"regs.coppa",1);return S("buildRequests payload",p),S("buildRequests bidderRequest",r),{method:"POST",url:"https://bid.pubwise.io/prebid",data:p,options:{contentType:"text/plain"},bidderRequest:r}}},interpretResponse:function(e,r){var i=[],a=I;S("interpretResponse request",r);var t=r.data;return e.body&&e.body.seatbid&&m.isArray(e.body.seatbid)&&(a=e.body.cur||a,e.body.seatbid.forEach(function(e){e.bid&&m.isArray(e.bid)&&e.bid.forEach(function(r){var s={requestId:r.impid,cpm:(parseFloat(r.price)||0).toFixed(2),width:r.w,height:r.h,creativeId:r.crid||r.id,currency:a,netRevenue:!0,ttl:300,ad:r.adm,pw_seat:e.seat||null,pw_dspid:r.ext&&r.ext.dspid?r.ext.dspid:null,partnerImpId:r.id||""};t.imp&&0<t.imp.length&&t.imp.forEach(function(e){if(r.impid===e.id)switch(o(r.adm,s),s.mediaType){case h.b:break;case h.c:!function(e,r){if(r.native={},e.hasOwnProperty("adm")){var s="";try{s=JSON.parse(e.adm.replace(/\\/g,""))}catch(e){return P("Error: Cannot parse native reponse for ad response: "+r.adm)}if(s&&s.assets&&0<s.assets.length){r.mediaType=h.c;for(var i=0,a=s.assets.length;i<a;i++)switch(s.assets[i].id){case y.TITLE.ID:r.native.title=s.assets[i].title&&s.assets[i].title.text;break;case y.IMAGE.ID:r.native.image={url:s.assets[i].img&&s.assets[i].img.url,height:s.assets[i].img&&s.assets[i].img.h,width:s.assets[i].img&&s.assets[i].img.w};break;case y.ICON.ID:r.native.icon={url:s.assets[i].img&&s.assets[i].img.url,height:s.assets[i].img&&s.assets[i].img.h,width:s.assets[i].img&&s.assets[i].img.w};break;case y.SPONSOREDBY.ID:case y.BODY.ID:case y.LIKES.ID:case y.DOWNLOADS.ID:case y.PRICE:case y.SALEPRICE.ID:case y.PHONE.ID:case y.ADDRESS.ID:case y.DESC2.ID:case y.CTA.ID:case y.RATING.ID:case y.DISPLAYURL.ID:r.native[n[s.assets[i].id]]=s.assets[i].data&&s.assets[i].data.value}r.clickUrl=s.link&&s.link.url,r.clickTrackers=s.link&&s.link.clicktrackers||[],r.impressionTrackers=s.imptrackers||[],r.jstracker=s.jstracker||[],r.width||(r.width=0),r.height||(r.height=0)}}}(r,s)}}),s.meta={},r.ext&&r.ext.dspid&&(s.meta.networkId=r.ext.dspid),r.ext&&r.ext.advid&&(s.meta.buyerId=r.ext.advid),r.adomain&&0<r.adomain.length&&(s.meta.advertiserDomains=r.adomain,s.meta.clickUrl=r.adomain[0]),i.push(s)})})),i}};function o(r,e){var s;if(0<=r.indexOf('"ver":'))try{(s=JSON.parse(r.replace(/\\/g,"")))&&s.assets&&(e.mediaType=h.c)}catch(e){P("Error: Cannot parse native reponse for ad response: "+r)}else e.mediaType=h.b}function O(e,r){if(!m.isStr(r))return r&&P("Ignoring param key: "+e+", expects string-value, found "+f(r)),E;switch(e){case"bidFloor":case"lat":case"lon":return parseFloat(r)||E;case"yob":return parseInt(r)||E;default:return r}}function w(e){if(S("parseAdSlot bid",e),e.params.adUnit="",e.params.width=0,e.params.height=0,e.params.adSlot=function(e){if(m.isStr(e))return e.replace(/^\s+/g,"").replace(/\s+$/g,"");return""}(e.params.adSlot),e.hasOwnProperty("mediaTypes")){if(e.mediaTypes.hasOwnProperty(h.b)&&e.mediaTypes.banner.hasOwnProperty("sizes")){for(var r=0,s=[];r<e.mediaTypes.banner.sizes.length;r++)2===e.mediaTypes.banner.sizes[r].length&&s.push(e.mediaTypes.banner.sizes[r]);e.mediaTypes.banner.sizes=s,1<=e.mediaTypes.banner.sizes.length&&(e.params.width=e.mediaTypes.banner.sizes[0][0],e.params.height=e.mediaTypes.banner.sizes[0][1],e.mediaTypes.banner.sizes=e.mediaTypes.banner.sizes.splice(1,e.mediaTypes.banner.sizes.length-1))}}else P("MediaTypes are Required for all Adunit Configs",e)}function S(e,r){m.logInfo("PubWise: "+e,r)}function P(e,r){m.logWarn("PubWise: "+e,r)}Object(i.registerBidder)(a)}},[732]);