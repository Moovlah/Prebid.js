pbjsChunk([204],{633:function(e,d,r){e.exports=r(634)},634:function(e,d,r){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.validateMultibid=g,d.adjustBidderRequestsHook=y,d.addBidResponseHook=x,d.sortByMultibid=B,d.targetBidPoolHook=h,r.d(d,"resetMultiConfig",function(){return A}),r.d(d,"resetMultibidUnits",function(){return v});var o=r(3),i=r(11),s=r(0),t=r(9),n=r.n(t),a=r(5),c=r.n(a),u=r(35),l=r(42);function f(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,d){if(!e)return;if("string"==typeof e)return b(e,d);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,d)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,d){(null==d||d>e.length)&&(d=e.length);for(var r=0,i=new Array(d);r<d;r++)i[r]=e[r];return i}var p=!1,m={},C={};function g(e){var d=!0,r=e.filter(function(e){return!!(e.bidder&&"string"==typeof e.bidder||e.bidders&&Array.isArray(e.bidders))||(s.logWarn("Filtering multibid entry. Missing required bidder or bidders property."),d=!1)}).map(function(e){return("number"!=typeof e.maxBids||e.maxBids<1||9<e.maxBids)&&(e.maxBids="number"!=typeof e.maxBids||e.maxBids<1?1:9,d=!1),e});return d||o.b.setConfig({multibid:r}),d}function y(e,d){d.map(function(e){return m[e.bidderCode]&&(e.bidLimit=m[e.bidderCode].maxbids),e}),e.call(this,d)}function x(e,d,r){var i,t=s.deepAccess(r,"floorData.floorValue");o.b.getConfig("multibid")||A(),(!p||!m[r.bidderCode]||"adpod"!==s.deepAccess(r,"video.context"))&&p&&m[r.bidderCode]?(m[r.bidderCode].prefix&&(r.multibidPrefix=m[r.bidderCode].prefix),r.originalBidder=r.bidderCode,s.deepAccess(C,"".concat(d,".").concat(r.bidderCode))?C[d][r.bidderCode].maxReached||t&&!(t<=r.cpm)?s.logWarn("Filtering multibid received from bidder ".concat(r.bidderCode,": ")+(C[d][r.bidderCode].maxReached?"Maximum bid limit reached for ad unit code ".concat(d):"Bid cpm under floors value.")):(r.originalRequestId=r.requestId,r.requestId=s.getUniqueIdentifierStr(),C[d][r.bidderCode].ads.push(r),i=C[d][r.bidderCode].ads.length,m[r.bidderCode].prefix&&(r.targetingBidder=m[r.bidderCode].prefix+i),i===m[r.bidderCode].maxbids&&(C[d][r.bidderCode].maxReached=!0),e.call(this,d,r)):(s.deepAccess(r,"floorData.floorValue")&&s.deepSetValue(C,"".concat(d,".").concat(r.bidderCode),{floor:s.deepAccess(r,"floorData.floorValue")}),s.deepSetValue(C,"".concat(d,".").concat(r.bidderCode),{ads:[r]}),C[d][r.bidderCode].ads.length===m[r.bidderCode].maxbids&&(C[d][r.bidderCode].maxReached=!0),e.call(this,d,r))):e.call(this,d,r)}function B(e,d){return e.bidder!==e.bidderCode&&d.bidder===d.bidderCode?1:e.bidder===e.bidderCode&&d.bidder!==d.bidderCode?-1:0}function h(e,d,n){var a,c,u,r,b=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;o.b.getConfig("multibid")||A(),p?(a=o.b.getConfig("sendBidsControl.dealPrioritization"),c=[],u=s.groupBy(d,"adUnitCode"),r=[].concat.apply([],Object.keys(u).reduce(function(e,d){var r=[],i=s.groupBy(u[d],"originalBidder"),t=[].concat.apply([],Object.keys(i).map(function(e){return i[e].sort(function(e,d){return e.originalBidder&&e.originalBidder!==e.bidderCode&&(e.bidderCode=e.originalBidder),e.originalBidder&&d.originalBidder!==d.bidderCode&&(d.bidderCode=d.originalBidder),e.cpm>d.cpm?-1:e.cpm<d.cpm?1:0}).map(function(e,d){return s.deepAccess(m,"".concat(e.bidderCode,".prefix"))&&0!==d&&d<m[e.bidderCode].maxbids&&(e.bidderCode=m[e.bidderCode].prefix+(d+1)),e})})),o=s.groupBy(t,"bidderCode");return Object.keys(o).forEach(function(e){return r.push(o[e].reduce(n))}),0<b?((r=a?r.sort(Object(l.b)(!0)):r.sort(function(e,d){return d.cpm-e.cpm})).sort(B),c.push.apply(c,f(r.slice(0,b)))):c.push.apply(c,f(r)),[].concat.apply([],c)},[])),e.call(this,r,n,b,!0)):e.call(this,d,n,b)}o.b.getConfig("multibid",function(e){Array.isArray(e.multibid)&&e.multibid.length&&g(e.multibid)&&(A(),p=!0,e.multibid.forEach(function(d){d.bidder?m[d.bidder]={maxbids:d.maxBids,prefix:d.targetBiddercodePrefix}:d.bidders.forEach(function(e){m[e]={maxbids:d.maxBids,prefix:d.targetBiddercodePrefix}})}))});var A=function(){p=!1,m={}},v=function(){return C={}};n.a.on(c.a.EVENTS.AUCTION_INIT,v),Object(i.d)(u.e,y),Object(i.a)("addBidResponse").before(x,3),Object(i.d)(l.a,h)}},[633]);