pbjsChunk([246],{527:function(e,t,n){e.exports=n(528)},528:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"spec",function(){return i}),t.resetInvibes=function(){h.optIn=void 0,h.noCookies=void 0,h.dom=void 0,h.bidResponse=void 0,h.domainOptions=void 0},t.stubDomainOptions=function(e){h.domainOptions={persistence:e}};var c=n(0),r=n(1),o=n(7);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var I={BIDDER_CODE:"invibes",BID_ENDPOINT:"https://bid.videostep.com/Bid/VideoAdContent",SYNC_ENDPOINT:"https://k.r66net.com/GetUserSync",TIME_TO_LIVE:300,DEFAULT_CURRENCY:"EUR",PREBID_VERSION:5,METHOD:"GET",INVIBES_VENDOR_ID:436,USERID_PROVIDERS:["pubcid","pubProvidedId"]},g=Object(o.b)(I.INVIBES_VENDOR_ID),i={code:I.BIDDER_CODE,gvlid:I.INVIBES_VENDOR_ID,isBidRequestValid:function(e){if(h&&"object"===l(h.bidResponse))return c.logInfo("Invibes Adapter - Bid response already received. Invibes only responds to one bid request per user visit"),!1;return"object"===l(e.params)&&null!=e.params.placementId},buildRequests:function(e,t){var n,r,o,i=[],s=(t=t||{}).auctionStart||Date.now();e.forEach(function(e){e.startTime=(new Date).getTime(),i.push(e.params.placementId),n=n||e.params.loginId,r=r||e.params.customEndpoint,m=m||e.params.customUserSync,o=o||e.userId}),h.optIn=h.optIn||function(e){if(e&&e.vendorData){if(h.gdpr_consent=function(e){if(e.purpose&&e.purpose.consents&&null!=e.tcString)return e.tcString;return e.consentData}(e.vendorData),!e.vendorData.gdprApplies||e.vendorData.hasGlobalConsent){var t;for(t=0;t<h.purposes;++t)h.purposes[t]=!0;for(t=0;t<h.legitimateInterests.length;++t)h.legitimateInterests[t]=!0;return 2}var n=function(e){if(e.purpose&&e.purpose.consents)return e.purpose.consents;if(e.purposeConsents)return e.purposeConsents;return null}(e.vendorData);if(null==n)return 0;var r=function(e){if(e.purpose&&e.purpose.consents)return 10;return 5}(e.vendorData);if(!D(n,h.purposes,r))return 0;D(function(e){if(e.purpose&&e.purpose.legitimateInterests)return e.purpose.legitimateInterests;return null}(e.vendorData),h.legitimateInterests,10);var o=I.INVIBES_VENDOR_ID.toString(10),i=function(e){if(e.vendor&&e.vendor.consents)return e.vendor.consents;if(e.vendorConsents)return e.vendorConsents;return null}(e.vendorData),s=!0===function(e){if(e.vendor&&e.vendor.legitimateInterests)return e.vendor.legitimateInterests;return{}}(e.vendorData)[o];return null==i||null==i[o]?4:!1===i[o]&&!1==s?0:2}return 0}(t.gdprConsent),h.visitId=h.visitId||y(),h.noCookies=h.noCookies||h.getCookie("ivNoCookie");var a=E(h.domainOptions),u=function(){var e={};try{e=JSON.parse(localStorage.ivbs)}catch(e){}var t,n=/[\\?&]([^=]+)=([^\\?&#]+)/g;for(;null!=(t=n.exec(window.location.href));)t.index===n.lastIndex&&n.lastIndex++,e[t[1].toLowerCase()]=t[2];return e}(),d=function(t){var n;t&&I.USERID_PROVIDERS.forEach(function(e){t[e]&&((n=n||{})[e]=t[e])});return n}(o),c={placementIds:i,loginId:n,auctionStartTime:s,bidVersion:I.PREBID_VERSION};d&&(c.userId=d);var l={location:b.location.href.substring(0,300).split(/[?#]/)[0],videoAdHtmlId:y(),showFallback:"0"===u.advs,ivbsCampIdsLocal:h.getCookie("IvbsCampIdsLocal"),bidParamsJson:JSON.stringify(c),capCounts:function(){if(!h.optIn||!h.purposes[0])return"";function o(){try{return JSON.parse(g.getDataFromLocalStorage("ivvcap"))||{}}catch(e){return{}}}function e(){var e,t=(new Date).getTime(),n=o(),r=!1;Object.keys(n).forEach(function(e){n[e][1]<=t&&(delete n[e],r=!0)}),r&&(e=n,g.setDataInLocalStorage("ivvcap",JSON.stringify(e)))}return function(){e();var t=o();return Object.keys(t).filter(function(e){return t.hasOwnProperty(e)}).sort().map(function(e){return[e,t[e][0]]})}().map(function(e){return e.join("=")}).join(",")}(),vId:h.visitId,width:b.innerWidth,height:b.innerHeight,oi:h.optIn,kw:C,purposes:h.purposes.toString(),li:h.legitimateInterests.toString(),tc:h.gdpr_consent};a&&(l.lId=a);var p="videoaddebug,advs,bvci,bvid,istop,trybvid,trybvci".split(",");for(var v in u){var f;u.hasOwnProperty(v)&&(f=u[v],(-1<p.indexOf(v)||/^vs|^invib/i.test(v))&&(l[v]=f))}return{method:I.METHOD,url:r||I.BID_ENDPOINT,data:l,options:{withCredentials:!0},bidRequests:e}},interpretResponse:function(e,t){return function(e,t){if(null==t||0===t.length)return c.logInfo("Invibes Adapter - No bids have been requested"),[];if(!e)return c.logInfo("Invibes Adapter - Bid response is empty"),[];var n=(e=(e=e.body||e).videoAdContentResult||e).BidModel;if("object"!==l(n))return c.logInfo("Invibes Adapter - Bidding is not configured"),[];if("object"===l(h.bidResponse))return c.logInfo("Invibes Adapter - Bid response already received. Invibes only responds to one bid request per user visit"),[];var r=(h.bidResponse=e).Ads;if(!Array.isArray(r)||r.length<1)return null!=e.AdReason&&c.logInfo("Invibes Adapter - "+e.AdReason),c.logInfo("Invibes Adapter - No ads available"),[];var o=r[0];if(null==n.PlacementId)return c.logInfo("Invibes Adapter - No Placement Id in response"),[];for(var i=[],s=0;s<t.length;s++){var a,u,d=t[s];n.PlacementId==d.params.placementId?(a=function(e){for(var t=[0,0],n=0;n<e.length;n++)e[n][0]*e[n][1]>t[0]*t[1]&&(t=e[n]);return t}(d.sizes),i.push({requestId:d.bidId,cpm:o.BidPrice,width:n.Width||a[0],height:n.Height||a[1],creativeId:o.VideoExposedId,currency:n.Currency||I.DEFAULT_CURRENCY,netRevenue:!0,ttl:I.TIME_TO_LIVE,ad:"<html>\n        <head><script type='text/javascript'>inDapIF=true;<\/script></head>\n          <body style='margin : 0; padding: 0;'>\n          creativeHtml\n          </body>\n        </html>".replace("creativeHtml",n.CreativeHtml)}),u=Date.now(),p.info("Bid auction started at "+n.AuctionStartTime+" . Invibes registered the bid at "+u+" ; bid request took a total of "+(u-n.AuctionStartTime)+" ms.")):c.logInfo("Invibes Adapter - Incorrect Placement Id: "+d.params.placementId)}return i}(e,null!=t?t.bidRequests:null)},getUserSyncs:function(e){if(e.iframeEnabled)return{type:"iframe",url:function(){var e=m||I.SYNC_ENDPOINT;e+="?visitId="+h.visitId,e+="&optIn="+h.optIn;var t=h.getCookie("ivbsdid");t&&(e+="&ivbsdid="+encodeURIComponent(t));var n=h.getCookie("ivvbks");n&&(e+="&ivvbks="+encodeURIComponent(n));return e}()}}};Object(r.registerBidder)(i);var m,b=function(){var e=window;try{for(;top!==e;)e.parent.location.href.length&&(e=e.parent)}catch(e){}return e}(),h=b.invibes=b.invibes||{};function y(){return Math.round(1e12*Math.random()).toString(36).substring(0,10)}h.purposes=h.purposes||[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],h.legitimateInterests=h.legitimateInterests||[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1];function s(){}function D(e,t,n){if(e instanceof Array){for(var r=0;r<n&&r<e.length;r++)t[r]=!(!1===e[r]||"false"===e[r]||null==e[r]);return 1}if("object"===l(e)&&null!==e){var o=0;for(var i in e){if(o===n)break;e.hasOwnProperty(i)&&(t[o]=!(!1===e[i]||"false"===e[i]||null==e[i]),o++)}return 1}}var p=g.hasLocalStorage()&&localStorage.InvibesDEBUG?window.console:{info:s,error:s,log:s,warn:s,debug:s};h.Uid={generate:function(){function e(){return Math.floor(Math.random()*t).toString(36)}var t=parseInt("zzzzzz",36);return e()+e()}},h.getCookie=function(e){if(g.cookiesAreEnabled()&&h.optIn&&h.purposes[0])return g.getCookie(e)};var a,u,d,v,E=function(e){var t=((e=e||{}).persistence||{cname:"ivbsdid",load:function(){var e=h.getCookie(this.cname)||"";try{return JSON.parse(e)}catch(e){}}}).load();return t?t.id||t.tempId:void 0},C=(a=document.getElementsByTagName("head")[0],u=a?a.getElementsByTagName("meta"):[],(!(v=S("keywords",300))||v.length<292)&&(!(v=S("description",300,v))||v.length<292)&&(d=d=300,v=f((v||"")+","+((document.title||a)&&a.getElementsByTagName("title")[0]?a.getElementsByTagName("title")[0].innerHTML:""),d)),v);function f(e,t){for(var n=(r=e.replace(/[<>~|\\"`!@#$%^&*()=+?]/g,"")).split(/[\s,;.:]+/).filter(function(e,t,n){return""!==e&&n.indexOf(e)===t}),r="",o=0;o<n.length;o++){if((r+=n[o]).length>=t)return r;o<n.length-1&&(r+=",")}return r}function S(e,t,n){e=e||"keywords",t=t||100;for(var r=n=n||"",o=0;o<u.length;o++){if(u[o].name&&u[o].name.toLowerCase()===e.toLowerCase())return f(n+","+u[o].content||"",t);u[o].name&&-1<u[o].name.toLowerCase().indexOf(e.toLowerCase())&&(r=n+","+u[o].content||"")}return f(r,t)}}},[527]);