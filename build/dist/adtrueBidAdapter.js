pbjsChunk([365],{252:function(e,a,r){e.exports=r(253)},253:function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),r.d(a,"spec",function(){return K});var c=r(0),t=r(1),u=r(2),m=r(3),i=r(7);function g(){return(g=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}).apply(this,arguments)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=Object(i.b)(),o="USD",h="AdTrue: ",v=void 0,y=0,b=0,d={},s={NUMBER:"number",STRING:"string",BOOLEAN:"boolean",ARRAY:"array",OBJECT:"object"},p=Object.freeze({1:"iframe",2:"image"}),f={mimes:s.ARRAY,minduration:s.NUMBER,maxduration:s.NUMBER,startdelay:s.NUMBER,playbackmethod:s.ARRAY,api:s.ARRAY,protocols:s.ARRAY,w:s.NUMBER,h:s.NUMBER,battr:s.ARRAY,linearity:s.NUMBER,placement:s.NUMBER,minbitrate:s.NUMBER,maxbitrate:s.NUMBER},I={ID:1,KEY:"title",TYPE:0},x={ID:2,KEY:"image",TYPE:0},w={ID:3,KEY:"icon",TYPE:0},E={ID:4,KEY:"sponsoredBy",TYPE:1},T={ID:5,KEY:"body",TYPE:2},R={ID:13,KEY:"rating",TYPE:3},S={ID:14,KEY:"likes",TYPE:4},D={ID:15,KEY:"downloads",TYPE:5},Y={ID:16,KEY:"price",TYPE:6},k={ID:17,KEY:"saleprice",TYPE:7},O={ID:18,KEY:"phone",TYPE:8},A={ID:19,KEY:"address",TYPE:9},z={ID:20,KEY:"desc2",TYPE:10},P={ID:21,KEY:"displayurl",TYPE:11},U={ID:22,KEY:"cta",TYPE:12};var N,C=-1<(N=navigator.userAgent).indexOf("Android")||-1<N.indexOf("Adr")?"Android":N.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?"iOS":"windows";function B(e){var a,r,t;return null==n.getDataFromLocalStorage("adtrue_user_id")&&n.setDataInLocalStorage("adtrue_user_id",(r=(new Date).getTime(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var a=(r+16*Math.random())%16|0;return r=Math.floor(r/16),("x"==e?a:3&a|8).toString(16)}))),a=n.getDataFromLocalStorage("adtrue_user_id"),{id:""+(new Date).getTime(),at:1,cur:[o],imp:[],site:{page:e.pageURL,ref:e.refURL,publisher:{}},device:{ip:"",ua:navigator.userAgent,os:C,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:(t=navigator.language?"language":"userLanguage",navigator[t].split("-")[0]),devicetype:/(ios|ipod|ipad|iphone|android)/i.test(navigator.userAgent)?1:/(smart[-]?tv|hbbtv|appletv|googletv|hdmi|netcast\.tv|viera|nettv|roku|\bdtv\b|sonydtv|inettvbrowser|\btv\b)/i.test(navigator.userAgent)?3:2,geo:{country:"{country_code}",type:0,ipservice:1,region:"",city:""}},user:{id:a},ext:{}}}function M(e){var a,r=e.params.video;if(r!==v){for(var t in a={},f)r.hasOwnProperty(t)&&(a[t]=function(e,a,r){var t,i="Ignoring param key: "+e+", expects "+r+", found "+l(a);switch(r){case s.BOOLEAN:t=c.isBoolean;break;case s.NUMBER:t=c.isNumber;break;case s.STRING:t=c.isStr;break;case s.ARRAY:t=c.isArray}return t(a)?a:(c.logWarn(h+i),v)}(t,r[t],f[t]));c.isArray(e.mediaTypes.video.playerSize[0])?(a.w=parseInt(e.mediaTypes.video.playerSize[0][0],10),a.h=parseInt(e.mediaTypes.video.playerSize[0][1],10)):c.isNumber(e.mediaTypes.video.playerSize[0])&&(a.w=parseInt(e.mediaTypes.video.playerSize[0],10),a.h=parseInt(e.mediaTypes.video.playerSize[1],10)),e.params.video.hasOwnProperty("skippable")&&(a.ext={video_skippable:e.params.video.skippable?1:0})}else a=v,c.logWarn(h+"Error: Video config params missing for adunit: "+e.params.adUnit+" with mediaType set as video. Ignoring video impression in the adunit.");return a}function _(e){var a,r,t={},i=e.hasOwnProperty("sizes")?e.sizes:[],n="",s=[],t={id:e.bidId,tagid:String(e.params.zoneId||void 0),bidfloor:function(e,a){switch(e){case"reserve":return parseFloat(a)||v;default:return a}}("reserve",e.params.reserve),secure:1,ext:{},bidfloorcur:o};if(e.hasOwnProperty("mediaTypes"))for(n in e.mediaTypes)switch(n){case u.b:(a=function(e){var a,r=e.mediaTypes.banner.sizes,t=[];if(r!==v&&c.isArray(r)){if(a={},e.params.width||e.params.height)a.w=e.params.width,a.h=e.params.height;else{if(0===r.length)return a=v,c.logWarn(h+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),a;a.w=parseInt(r[0][0],10),a.h=parseInt(r[0][1],10),r=r.splice(1,r.length-1)}0<r.length&&(t=[],r.forEach(function(e){1<e.length&&t.push({w:e[0],h:e[1]})}),0<t.length&&(a.format=t)),a.pos=0,a.topframe=c.inIframe()?0:1}else c.logWarn(h+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),a=v;return a}(e))!==v&&(t.banner=a);break;case u.d:(r=M(e))!==v&&(t.video=r)}else a={pos:0,w:e.params.width,h:e.params.height,topframe:c.inIframe()?0:1},c.isArray(i)&&1<i.length&&((i=i.splice(1,i.length-1)).forEach(function(e){s.push({w:e[0],h:e[1]})}),a.format=s),t.banner=a;return t.hasOwnProperty(u.b)||t.hasOwnProperty(u.c)||t.hasOwnProperty(u.d)?t:v}var K={code:"adtrue",supportedMediaTypes:["banner","video"],isBidRequestValid:function(e){return!(!e||!e.params)&&(e.params.zoneId?e.params.publisherId?c.isStr(e.params.publisherId)?!!c.isStr(e.params.zoneId)||(c.logWarn(h+"Error: zoneId is mandatory and cannot be numeric"),!1):(c.logWarn(h+"Error: publisherId is mandatory and cannot be numeric"),!1):(c.logWarn(h+"Error: missing publisherId"),!1):(c.logWarn(h+"Error: missing zoneId"),!1))},buildRequests:function(e,a){var r;a&&a.refererInfo&&(r=a.refererInfo);var t,i,n,s,o={pageURL:(t=r)&&t.referer?t.referer:window.location.href,refURL:window.document.referrer},d=B(o),p="";if(e.forEach(function(e){(function(e){if(e.params.width=0,e.params.height=0,e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(u.b)&&e.mediaTypes.banner.hasOwnProperty("sizes")){for(var a=0,r=[];a<e.mediaTypes.banner.sizes.length;a++)2===e.mediaTypes.banner.sizes[a].length&&r.push(e.mediaTypes.banner.sizes[a]);e.mediaTypes.banner.sizes=r,1<=e.mediaTypes.banner.sizes.length&&(e.params.width=e.mediaTypes.banner.sizes[0][0],e.params.height=e.mediaTypes.banner.sizes[0][1],e.mediaTypes.banner.sizes=e.mediaTypes.banner.sizes.splice(1,e.mediaTypes.banner.sizes.length-1))}})(i=c.deepClone(e)),o.zoneId=o.zoneId||i.params.zoneId,o.pubId=o.pubId||i.params.publisherId,o.transactionId=i.transactionId,""===p?p=i.params.currency||v:i.params.hasOwnProperty("currency")&&p!==i.params.currency&&c.logWarn(h+"Currency specifier ignored. Only one currency permitted."),i.params.currency=p;var a=_(i);a&&d.imp.push(a)}),0!=d.imp.length)return y=o.pubId.trim(),b=o.zoneId.trim(),d.site.publisher.id=o.pubId.trim(),d.ext.wrapper={},d.ext.wrapper.transactionId=o.transactionId,d.ext.wrapper.wiid=o.wiid||a.auctionId,d.ext.wrapper.wp="pbjs",d.user.geo={},d.device.geo=d.user.geo,d.site.page=o.pageURL,d.site.domain=(n=d.site.page,(s=document.createElement("a")).href=n,s.hostname),"object"===l(m.b.getConfig("content"))&&(d.site.content=m.b.getConfig("content")),"object"===l(m.b.getConfig("device"))&&(d.device=g(d.device,m.b.getConfig("device"))),c.deepSetValue(d,"source.tid",o.transactionId),-1!==window.location.href.indexOf("adtrueTest=true")&&(d.test=1),e[0].schain&&c.deepSetValue(d,"source.ext.schain",e[0].schain),a&&a.gdprConsent&&(c.deepSetValue(d,"user.ext.consent",a.gdprConsent.consentString),c.deepSetValue(d,"regs.ext.gdpr",a.gdprConsent.gdprApplies?1:0)),a&&a.uspConsent&&c.deepSetValue(d,"regs.ext.us_privacy",a.uspConsent),!0===m.b.getConfig("coppa")&&c.deepSetValue(d,"regs.coppa",1),{method:"POST",url:"https://hb.adtrue.com/prebid/auction",data:JSON.stringify(d),bidderRequests:a}},interpretResponse:function(e,a){var t=[],i=o,n=JSON.parse(a.data),s=n.site&&n.site.ref?n.site.ref:"";try{e.body&&e.body.seatbid&&c.isArray(e.body.seatbid)&&(i=e.body.cur||i,e.body.seatbid.forEach(function(e){e.bid&&c.isArray(e.bid)&&e.bid.forEach(function(a){var r={requestId:a.impid,cpm:(parseFloat(a.price)||0).toFixed(2),width:a.w,height:a.h,creativeId:a.crid||a.id,dealId:a.dealid,currency:i,netRevenue:!1,ttl:300,referrer:s,ad:a.adm,partnerImpId:a.id||""};n.imp&&0<n.imp.length&&n.imp.forEach(function(e){if(a.impid===e.id)switch(!function(a,e){var r,t=new RegExp(/VAST\s+version/);if(e.mediaType=u.b,t.test(a))e.mediaType=u.d;else try{(r=JSON.parse(a.replace(/\\/g,"")))&&r.native&&(e.mediaType=u.c)}catch(e){c.logWarn(h+"Error: Cannot parse native reponse for ad response: "+a)}}(a.adm,r),r.mediaType){case u.b:case u.d:break;case u.c:!function(e,a){if(a.native={},e.hasOwnProperty("adm")){var r="";try{r=JSON.parse(e.adm.replace(/\\/g,""))}catch(e){return}if(r&&r.native&&r.native.assets&&0<r.native.assets.length){a.mediaType=u.c;for(var t=0,i=r.native.assets.length;t<i;t++)switch(r.native.assets[t].id){case I.ID:a.native.title=r.native.assets[t].title&&r.native.assets[t].title.text;break;case x.ID:a.native.image={url:r.native.assets[t].img&&r.native.assets[t].img.url,height:r.native.assets[t].img&&r.native.assets[t].img.h,width:r.native.assets[t].img&&r.native.assets[t].img.w};break;case w.ID:a.native.icon={url:r.native.assets[t].img&&r.native.assets[t].img.url,height:r.native.assets[t].img&&r.native.assets[t].img.h,width:r.native.assets[t].img&&r.native.assets[t].img.w};break;case E.ID:case T.ID:case S.ID:case D.ID:case Y:case k.ID:case O.ID:case A.ID:case z.ID:case U.ID:case R.ID:case P.ID:a.native[d[r.native.assets[t].id]]=r.native.assets[t].data&&r.native.assets[t].data.value}a.native.clickUrl=r.native.link&&r.native.link.url,a.native.clickTrackers=r.native.link&&r.native.link.clicktrackers||[],a.native.impressionTrackers=r.native.imptrackers||[],a.native.jstracker=r.native.jstracker||[],a.width||(a.width=0),a.height||(a.height=0)}}}(a,r)}}),r.meta={},a.ext&&a.ext.dspid&&(r.meta.networkId=a.ext.dspid),a.ext&&a.ext.advid&&(r.meta.buyerId=a.ext.advid),a.adomain&&0<a.adomain.length&&(r.meta.advertiserDomains=a.adomain,r.meta.clickUrl=a.adomain[0]),e.ext&&e.ext.buyid&&(r.adserverTargeting={hb_buyid_adtrue:e.ext.buyid}),t.push(r)})}))}catch(e){c.logError(e)}return t},getUserSyncs:function(e,a,i,n){return a&&0!==a.length&&(e.iframeEnabled||e.pixelEnabled)?a.reduce(function(e,a){var r=c.deepAccess(a,"body.ext.cookie_sync");if(r){var t=r.map(function(e){return{type:p[e.type],url:e.url+"&publisherId="+y+"&zoneId="+b+"&gdpr="+(i&&i.gdprApplies?1:0)+"&gdpr_consent="+encodeURIComponent(i?i.consentString:"")+"&us_privacy="+encodeURIComponent(n||"")+"&coppa="+(!0===m.b.getConfig("coppa")?1:0)}});return e.concat(t)}},[]):[]}};Object(t.registerBidder)(K)}},[252]);