pbjsChunk([217],{605:function(e,t,r){e.exports=r(606)},606:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"listenerAdded",function(){return l}),r.d(t,"isEnabled",function(){return b}),t.init=O,t.updateRenderers=y,t.addBidResponseHook=h,t.addListenerOnce=g,t.isMassBid=w,t.useDefaultMatch=j,t.useDefaultRender=v;var n=r(3),a=r(11),d=r(10),s=r.n(d);function o(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function i(a){for(var e=1;e<arguments.length;e++){var d=null!=arguments[e]?arguments[e]:{};e%2?o(Object(d),!0).forEach(function(e){var t,r,n;t=a,n=d[r=e],r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(d)):o(Object(d)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(d,e))})}return a}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var u,p,f={dealIdPattern:/^MASS/i},l=!1,b=!1,m={};function O(e){!1===(u=c({},f,window.massConfig&&window.massConfig.mass,e)).enabled?b&&(Object(a.a)("addBidResponse").getHooks({hook:h}).remove(),b=!1):b||(Object(a.a)("addBidResponse").before(h),b=!0),b&&y()}function y(){return p=[],u.dealIdPattern&&u.renderUrl&&p.push({match:w,render:v(u.renderUrl,"mass")}),(u.custom||[]).forEach(function(e){!e.match&&e.dealIdPattern&&(e.match=j(e.dealIdPattern)),!e.render&&e.renderUrl&&e.namespace&&(e.render=v(e.renderUrl,e.namespace)),e.match&&e.render&&p.push(e)}),p}function h(e,t,r){for(var n,a,d=0;d<p.length;d++)if(p[d].match(r)){n=p[d];break}n&&(a=s()(this.bidderRequest.bids,function(e){return e.bidId===r.requestId}),m[r.requestId]={renderer:n,payload:{bidRequest:a,bid:r,adm:r.ad}},r.ad='<script>window.parent.postMessage({massBidId: "'+r.requestId+'"}, "*");<\/script>',g()),e(t,r)}function g(){l||(window.addEventListener("message",function(e){var t,r;e&&e.data&&e.data.massBidId&&((t=m[e.data.massBidId])&&(delete(r=i({type:"prebid",event:e},t.payload)).bid.ad,t.renderer.render(r)))}),l=!0)}function w(e){return!!(e.meta&&e.meta.mass||u.dealIdPattern&&u.dealIdPattern.test(e.dealId))&&/mass:\/\/|\/pcreative\?/i.test(e.ad)}function j(t){return function(e){return t.test(e.dealId)}}function v(a,d){return function(e){var t,r,n=window[d]=window[d]||{};n.queue=n.queue||[],n.queue.push(e),n.loaded||((t=document.createElement("script")).type="text/javascript",t.async=!0,t.src=a,(r=document.getElementsByTagName("script")[0]).parentNode.insertBefore(t,r),n.loaded=!0)}}O(),n.b.getConfig("mass",function(e){return O(e.mass)})}},[605]);