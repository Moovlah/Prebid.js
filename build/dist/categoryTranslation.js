pbjsChunk([326],{342:function(a,t,e){a.exports=e(343)},343:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),e.d(t,"storage",function(){return c}),e.d(t,"registerAdserver",function(){return f}),t.getAdserverCategoryHook=b,t.initTranslation=m;var i=e(3),r=e(11),n=e(4),o=e(0),l=e(35),s=e(7),c=Object(s.a)("categoryTranslation"),g="iabToFwMappingkey",d="iabToFwMappingkeyPub",p=1,f=Object(r.b)("async",function(a){"freewheel"===a&&m("https://cdn.jsdelivr.net/gh/prebid/category-mapping-file@1/freewheel-mapping.json",g)},"registerAdserver");function b(a,t,e){if(!e)return a.call(this,t);if(!i.b.getConfig("adpod.brandCategoryExclusion"))return a.call(this,t,e);var r=i.b.getConfig("brandCategoryTranslation.translationFile")?d:g;if(e.meta&&!e.meta.adServerCatId){var n=c.getDataFromLocalStorage(r);if(n){try{n=JSON.parse(n)}catch(a){Object(o.logError)("Failed to parse translation mapping file")}e.meta.primaryCatId&&n.mapping&&n.mapping[e.meta.primaryCatId]?e.meta.adServerCatId=n.mapping[e.meta.primaryCatId].id:e.meta.adServerCatId=void 0}else Object(o.logError)("Translation mapping data not found in local storage")}a.call(this,t,e)}function m(a,t){Object(r.d)(l.c,b,50);var e=c.getDataFromLocalStorage(t);try{(!(e=e?JSON.parse(e):void 0)||Object(o.timestamp)()>e.lastUpdated+24*p*60*60*1e3)&&Object(n.a)(a,{success:function(a){try{(a=JSON.parse(a)).lastUpdated=Object(o.timestamp)(),c.setDataInLocalStorage(t,JSON.stringify(a))}catch(a){Object(o.logError)("Failed to parse translation mapping file")}},error:function(){Object(o.logError)("Failed to load brand category translation file.")}})}catch(a){Object(o.logError)("Failed to parse translation mapping file")}}f(),i.b.getConfig("brandCategoryTranslation",function(a){var t;(t=a.brandCategoryTranslation).translationFile&&m(t.translationFile,d)})}},[342]);