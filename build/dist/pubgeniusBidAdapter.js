pbjsChunk([167],{720:function(e,t,r){e.exports=r(721)},721:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"spec",function(){return o});var n=r(1),a=r(4),d=r(3),i=r(2),l=r(0);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o={code:"pubgenius",supportedMediaTypes:[i.b,i.d],isBidRequestValid:function(e){var t=e.params.adUnitId;if(!Object(l.isStr)(t)&&!Object(l.isInteger)(t))return Object(l.logError)("pubgenius bidder params: adUnitId must be a string or integer."),!1;var r,n,a,i,s,o=e.mediaTypes;return o.banner?(r=o.banner,!(!(n=r.sizes)||!n.length)&&n.every(p)):(a=o.video,i=e.params.video,!!((s=c(a,i)).placement&&p([s.w,s.h])&&s.mimes&&s.mimes.length&&Object(l.isArrayOfNums)(s.protocols)&&s.protocols.length))},buildRequests:function(e,t){var r={id:t.auctionId,imp:e.map(m),tmax:t.timeout,ext:{pbadapter:{version:"1.1.0"}}},n=function(e){var t=null,r=e.refererInfo,n=d.b.getConfig("pageUrl")||r.canonicalUrl||r.referer;n&&((t=t||{}).page=n);if(r.reachedTop)try{var a=window.top.document.referrer;a&&((t=t||{}).ref=a)}catch(e){}return t}(t);n&&(r.site=n);var a,i,s=t.gdprConsent;s&&(a=s.gdprApplies,i=s.consentString,Object(l.deepSetValue)(r,"regs.ext.gdpr",b(a)),a&&i&&Object(l.deepSetValue)(r,"user.ext.consent",i));var o=t.uspConsent;o&&Object(l.deepSetValue)(r,"regs.ext.us_privacy",o);var c=e[0].schain;c&&Object(l.deepSetValue)(r,"source.ext.schain",c),d.b.getConfig("coppa")&&Object(l.deepSetValue)(r,"regs.coppa",1);var p,u=Object(l.deepAccess)(e,"0.userIdAsEids");return u&&u.length&&((p=u.filter(function(e){return"adserver.org"===e.source})).length&&Object(l.deepSetValue)(r,"user.ext.eids",p)),{method:"POST",url:"".concat(f(),"/prebid/auction"),data:r}},interpretResponse:function(e){var t=e.body,r=[],n=t.cur||"USD",a=t.seatbid;return a&&a.forEach(function(e){e.bid.forEach(function(e){var t=function(e){var t={requestId:e.impid,cpm:e.price,width:e.w,height:e.h,ttl:e.exp,creativeId:e.crid,netRevenue:!0};e.adomain&&e.adomain.length&&(t.meta={advertiserDomains:e.adomain});switch((Object(l.deepAccess)(e,"ext.pbadapter")||{}).mediaType){case"video":e.nurl&&(t.vastUrl=e.nurl),e.adm&&(t.vastXml=e.adm),t.mediaType=i.d;break;default:t.ad=e.adm}return t}(e);t.currency=n,r.push(t)})}),r},getUserSyncs:function(e,t,r,n){var a,i,s=[];return e.iframeEnabled&&(a={},r&&(a.gdpr=b(r.gdprApplies),r.consentString&&(a.consent=r.consentString)),n&&(a.us_privacy=n),i=Object(l.parseQueryStringParameters)(a),s.push({type:"iframe",url:"".concat(f(),"/usersync/pixels.html?").concat(i)})),s},onTimeout:function(e){Object(a.a)("".concat(f(),"/prebid/events?type=timeout"),null,JSON.stringify(e),{method:"POST"})}};function c(e,t){e=e||{};var r=Object(l.pick)(e,["api","mimes","protocols","playbackmethod"]);switch(e.context){case"instream":r.placement=1;break;case"outstream":r.placement=2}return e.playerSize&&(r.w=e.playerSize[0][0],r.h=e.playerSize[0][1]),s(r,t)}function m(e){var t,r={id:e.bidId,tagid:String(e.params.adUnitId)};e.mediaTypes.banner?r.banner={format:e.mediaTypes.banner.sizes.map(function(e){return{w:e[0],h:e[1]}}),topframe:b(!Object(l.inIframe)())}:r.video=c(e.mediaTypes.video,e.params.video),!Object(l.isFn)(e.getFloor)||(t=e.getFloor({mediaType:e.mediaTypes.banner?"banner":"video",size:"*",currency:"USD"}).floor)&&(r.bidfloor=t);var n=e.params.position;return Object(l.isInteger)(n)&&(r.banner.pos=n),e.params.test&&Object(l.deepSetValue)(r,"ext.test",1),r}function b(e){return e?1:0}function f(){var e=d.b.getConfig("pubgenius");return e&&e.endpoint||"https://ortb.adpearl.io"}function p(e){return Object(l.isArrayOfNums)(e,2)&&0<e[0]&&0<e[1]}Object(n.registerBidder)(o)}},[720]);