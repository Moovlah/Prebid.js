pbjsChunk([249],{521:function(e,n,t){e.exports=t(522)},522:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.trackInstreamDeliveredImpressions=i;var p=t(3),v=t(23),m=t(25),g=t(9),h=(t.n(g),t(0)),r=t(5);t.n(r);function b(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return c(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return c(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==t.return||t.return()}finally{if(u)throw i}}}}function c(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var E=r.TARGETING_KEYS.CACHE_ID,T=r.TARGETING_KEYS.UUID,w=r.EVENTS.BID_WON,o=r.EVENTS.AUCTION_END,A=r.BID_STATUS.RENDERED;p.b.setDefaults({instreamTracking:h.deepClone({enabled:!1,maxWindow:6e4,pollingFreq:500})});var I=/video|fetch|xmlhttprequest|other/;function i(e){var n=e.adUnits,t=e.bidsReceived,r=e.bidderRequests,o=p.b.getConfig("instreamTracking")||{};if(!o.enabled||!window.performance||!window.performance.getEntriesByType)return!1;var i=t.filter(function(e){var n=h.getBidRequest(e.requestId,r);return n&&h.deepAccess(n,"mediaTypes.video.context")===m.a&&e.videoCacheKey});if(!i.length)return!1;var a={};n.forEach(function(e){a[e.code]||h.deepAccess(e,"mediaTypes.video.context")!==m.a||(a[e.code]=!0)});var u=Object.keys(a).length,c=Date.now(),f=o.maxWindow,s=o.pollingFreq,d=o.urlPattern,l=0,y=0;return setTimeout(function e(){var n,t=window.performance.getEntriesByType("resource").splice(y),r=b(t);try{for(r.s();!(n=r.n()).done;)!function(){var e=n.value,t=e.name;I.test(e.initiatorType)&&i.forEach(function(e){var n=!(-1!==t.indexOf(E)||-1!==t.indexOf(T))&&-1!==t.indexOf(e.videoCacheKey);d&&d instanceof RegExp&&!d.test(t)||n&&e.status!==A&&(l++,v.a.addWinningBid(e),g.emit(w,e))})}()}catch(e){r.e(e)}finally{r.f()}y+=t.length,Date.now()-c<f&&l<u&&setTimeout(e,s)},s),!0}g.on(o,i)}},[521]);