pbjsChunk([307],{389:function(e,r,t){e.exports=t(390)},390:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t.d(r,"spec",function(){return p});var f=t(0),n=t(1),y=t(2),o=t(23),a=t(10),l=t.n(a),s=t(13),g=t.n(s),i=t(7);function d(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return c(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return c(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var u=Object(i.b)(),p={code:"craft",aliases:["craft"],supportedMediaTypes:[y.b],isBidRequestValid:function(e){return!!e.params.sitekey&&!!e.params.placementId&&!function(){try{var e=window.context||window.parent.context;return e&&e.pageViewId?e:!1}catch(e){return!1}}()},buildRequests:function(e,r){var t,n=e.map(v),a=e[0].schain,o={tags:d(n),ua:navigator.userAgent,sdk:{version:"4.35.0-pre"},schain:a};return r&&r.gdprConsent&&(o.gdpr_consent={consent_string:r.gdprConsent.consentString,consent_required:r.gdprConsent.gdprApplies}),r&&r.uspConsent&&(o.us_privacy=r.uspConsent),r&&r.refererInfo&&(t={rd_ref:r.refererInfo.referer,rd_top:r.refererInfo.reachedTop,rd_ifs:r.refererInfo.numIframes},r.refererInfo.stack&&(t.rd_stk=r.refererInfo.stack.join(",")),o.referrer_detection=t),function(e,r){var t={};!function(e){var r=!0;e&&e.gdprConsent&&e.gdprConsent.gdprApplies&&2===e.gdprConsent.apiVersion&&(r=!(!0!==f.deepAccess(e.gdprConsent,"vendorData.purpose.consents.1")));return r}(r)&&(t={withCredentials:!1});var n=JSON.stringify(e);return{method:"POST",url:"".concat("https://gacraft.jp/prebid-v3","/").concat(e.tags[0].sitekey),data:n,bidderRequest:r,options:t}}(o,r)},interpretResponse:function(e,r){var c=this,u=r.bidderRequest;try{e=e.body;var p=[];if(!e)return[];if(e.error){var t="in response for ".concat(u.bidderCode," adapter");return e.error&&(t+=": ".concat(e.error)),f.logError(t),p}return e.tags&&e.tags.forEach(function(e){var r,t,n,a,o,s,i,d=(r=e)&&r.ads&&r.ads.length&&l()(r.ads,function(e){return e.rtb});d&&0!==d.cpm&&g()(c.supportedMediaTypes,d.ad_type)&&(a=e,o=d,s=u,i=f.getBidRequest(a.uuid,[s]),(t={requestId:a.uuid,cpm:o.cpm,currency:"JPY",width:o.rtb.banner.width,height:o.rtb.banner.height,ad:o.rtb.banner.content,ttl:360,creativeId:o.creative_id,netRevenue:!1,dealId:o.deal_id,meta:null,_adUnitCode:i.adUnitCode,_bidKey:a.bid_key,_prebidWon:a.won_url}).mediaType=(n=d.ad_type)===y.d?y.d:n===y.c?y.c:y.b,p.push(t))}),p}catch(e){return[]}},transformBidParams:function(t,e){return t=f.convertTypes({sitekey:"string",placementId:"string",keywords:f.transformBidderParamKeywords},t),e&&(m(t.keywords)&&t.keywords.forEach(b),Object.keys(t).forEach(function(e){var r=f.convertCamelToUnderscore(e);r!==e&&(t[r]=t[e],delete t[e])})),t},onBidWon:function(e){var r=new XMLHttpRequest;r.open("POST",e._prebidWon),r.send()}};function m(e){return f.isArray(e)&&0<e.length}function b(e){m(e.value)&&""===e.value[0]&&delete e.value}function v(r){var e,t={};for(var n in r.params)t[n]=r.params[n];try{u.hasLocalStorage()&&(t.uid=JSON.parse(u.getDataFromLocalStorage("".concat(r.params.sitekey,"_uid"))))}catch(e){}t.sizes=r.sizes,t.primary_size=t.sizes[0],t.ad_types=[],t.uuid=r.bidId,f.isEmpty(r.params.keywords)||(0<(e=f.transformBidderParamKeywords(r.params.keywords)).length&&e.forEach(b),t.keywords=e);var a=l()(o.a.getAdUnits(),function(e){return r.transactionId===e.transactionId});return a&&a.mediaTypes&&a.mediaTypes.banner&&t.ad_types.push(y.b),0===t.ad_types.length&&delete t.ad_types,t}Object(n.registerBidder)(p)}},[389]);