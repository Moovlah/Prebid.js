pbjsChunk([239],{547:function(t,r,e){t.exports=e(548)},548:function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),e.d(r,"jwplayerSubmodule",function(){return p}),r.fetchTargetingInformation=y,r.fetchTargetingForMediaId=j,r.enrichAdUnits=w,r.extractPublisherParams=D,r.getVatFromCache=I,r.getVatFromPlayer=O,r.formatTargetingResponse=T,r.addTargetingToBid=E;var n=e(11),a=e(3),i=e(4),o=e(0),c=e(10),u=e.n(c),f=e(17);function s(){return(s=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}).apply(this,arguments)}var l,d="jwplayer",g={},m={},v=0,p={name:d,getBidRequestData:function(t,r){v=0,w(t.adUnits||Object(f.a)().adUnits),v<=0?r():l=r},init:function(t,r){return!0}};function y(t){var r=t.mediaIDs;r&&r.forEach(function(t){j(t)})}function j(e){var t=Object(i.b)();m[e]=null,t("https://cdn.jwplayer.com/v2/media/".concat(e),{success:function(t){var r=function(t){var r;try{var e=JSON.parse(t);if(!e)throw"Empty response";var n=e.playlist;if(!n||!n.length)throw"Empty playlist";r=n[0].jwpseg}catch(t){Object(o.logError)(t)}return r}(t);h(r,e),b(e,!!r)},error:function(){Object(o.logError)("failed to retrieve targeting information"),b(e,!1)}})}function h(t,r){t&&r&&(g[r]=t)}function b(t,r){var e=m[t];e&&(e(r?I(t):{mediaID:t}),v--),delete m[t],0<v||l&&(l(),l=null)}function w(t){var r=a.b.getConfig("ortb2.site.ext.data.jwTargeting");t.forEach(function(e){var t=D(e,r);t&&Object.keys(t).length&&function(t,r){var e=t.playerID,n=t.mediaID;if(void 0!==m[n])return function(t,r,e){var n=O(t,r);n?e(n):(v++,m[r]=e)}(e,n,r);var a=I(n)||O(e,n)||{mediaID:n};r(a)}(t,function(t){var r;t&&(r=T(t),function(t,r){if(!t||!r)return;t.forEach(function(t){return E(t,r)})}(e.bids,r))})})}function D(t,r){var e,n,a;try{e=t.ortb2Imp.ext.data.jwTargeting}catch(t){}if(e||(n=t.mediaTypes,(a=n&&n.video)&&"instream"===a.context))return s({},r,e)}function I(t){var r=g[t];return r?{segments:r,mediaID:t}:null}function O(t,r){var e=function(t){var r=window.jwplayer;if(!r)return void Object(o.logError)("jwplayer.js was not found on page");var e=r(t);return e&&e.getPlaylist?e:void Object(o.logError)("player ID did not match any players")}(t);if(!e)return null;var n=r?u()(e.getPlaylist(),function(t){return t.mediaid===r}):e.getPlaylistItem();if(!n)return null;r=r||n.mediaid;var a=n.jwpseg;return h(a,r),{segments:a,mediaID:r}}function T(t){var r,e=t.segments,n=t.mediaID,a={};return e&&e.length&&(a.segments=e),n&&(r="jw_"+n,a.content={id:r}),a}function E(t,r){var e=t.rtd||{},n={};n[d]=s({},e[d],{targeting:r}),t.rtd=s({},e,n)}a.b.getConfig("realTimeData",function(t){var r=t.realTimeData.dataProviders,e=r&&u()(r,function(t){return t.name&&t.name.toLowerCase()===d}),n=e&&e.params;n&&y(n)}),Object(n.e)("realTimeData",p)}},[547]);