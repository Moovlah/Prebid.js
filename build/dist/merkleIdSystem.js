pbjsChunk([211],{619:function(e,r,o){e.exports=o(620)},620:function(e,r,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),o.d(r,"storage",function(){return d}),o.d(r,"merkleIdSubmodule",function(){return u});var t=o(0),l=o(4),n=o(11),s=o(7),a="merkleId",i="_svsid",d=Object(s.b)();function c(e){return"string"!=typeof e.sv_session?e.sv_session:(d.cookiesAreEnabled()?d.getCookie(i):null)||(d.localStorageIsEnabled()?d.getDataFromLocalStorage(i):null)}var u={name:a,decode:function(e){var r=e&&e.pam_id&&"string"==typeof e.pam_id.id?e.pam_id:void 0;return t.logInfo("Merkle id "+JSON.stringify(r)),r?{merkleId:r}:void 0},getId:function(e,r){var o=e&&e.params||{};if(o&&"string"==typeof o.vendor)if("string"==typeof o.sv_cid)if("string"==typeof o.sv_pubid)if("string"==typeof o.sv_domain){if(!r||"boolean"!=typeof r.gdprApplies||!r.gdprApplies){var n,s,i,d=(s=c(n=o),i="https://id2.sv.rkdms.com/identity/"+"?vendor=".concat(n.vendor,"&sv_cid=").concat(n.sv_cid,"&sv_domain=").concat(n.sv_domain,"&sv_pubid=").concat(n.sv_pubid),s&&i.append("&sv_session=".concat(s)),t.logInfo("Merkle url :"+i),i);return{callback:function(o){var e={success:function(e){var r;if(e)try{r=JSON.parse(e),t.logInfo("Merkle responseObj "+JSON.stringify(r))}catch(e){t.logError(e)}o(r)},error:function(e){t.logError("".concat(a,": merkleId fetch encountered an error"),e),o()}};Object(l.a)(d,e,void 0,{method:"GET",withCredentials:!0})}}}t.logError("User ID - merkleId submodule does not currently handle consent strings")}else t.logError("User ID - merkleId submodule requires a valid sv_domain string to be defined");else t.logError("User ID - merkleId submodule requires a valid sv_pubid string to be defined");else t.logError("User ID - merkleId submodule requires a valid sv_cid string to be defined");else t.logError("User ID - merkleId submodule requires a valid vendor to be defined")}};Object(n.e)("userId",u)}},[619]);