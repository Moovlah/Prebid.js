pbjsChunk([285],{442:function(r,e,n){r.exports=n(443)},443:function(r,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"fabrickIdSubmodule",function(){return a}),e.appendUrl=v;var g=n(0),h=n(4),t=n(11),k=n(21),a={name:"fabrickId",decode:function(r){return r&&r.fabrickId?{fabrickId:r.fabrickId}:void 0},getId:function(r,t,a){try{var c=r&&r.params||{};if(window.fabrickMod1&&window.fabrickMod1(c,t,a),!c||!c.apiKey||"string"!=typeof c.apiKey)return void g.logError("fabrick submodule requires an apiKey.");try{var e=(b=c).url?b.url:"https://fid.agkn.com/f?",n=Object.keys(c);for(var o in n){var i=n[o];if(!("url"===i||"refererInfo"===i||3<i.length&&"max"===i.substring(0,3))){var f=c[i];if(Array.isArray(f))for(var u in f)"string"!=typeof f[u]&&"number"!=typeof f[u]||(e+="".concat(i,"=").concat(f[u],"&"));else"string"!=typeof f&&"number"!=typeof f||(e+="".concat(i,"=").concat(f,"&"))}}e=e.slice(0,-1);var s=(l=c).refererInfo?l.refererInfo:Object(k.a)(),d=new Map;p(d,s.referer),s.stack&&s.stack[0]&&p(d,s.stack[0]),p(d,s.canonicalUrl),p(d,window.location.href),d.forEach(function(r){e=v(e,"r",r,c)});return{callback:function(n){var r={success:function(r){if(window.fabrickMod2)return window.fabrickMod2(n,r,c,t,a);var e;if(r)try{e=JSON.parse(r)}catch(r){g.logError(r),e={}}n(e)},error:function(r){g.logError("fabrickId fetch encountered an error",r),n()}};Object(h.a)(e,r,null,{method:"GET",withCredentials:!0})}}}catch(r){g.logError("fabrickIdSystem encountered an error",r)}}catch(r){g.logError("fabrickIdSystem encountered an error",r)}var l,b}};function p(r,e){var n,t;e&&(n=e.split("?")[0],r.has(n)?(t=r.get(n),e.length>t.length&&r.set(n,e)):r.set(n,e))}function v(r,e,n,t){var a=t&&t.maxUrlLen||2e3,c=t&&t.maxRefLen||1e3,o=t&&t.maxSpaceAvailable||50;if(n&&r.length<a-o){var i=a-r.length;return c<i&&(i=c),(n="&".concat(e,"=").concat(encodeURIComponent(n))).length>=i&&("%"===(n=n.substring(0,i)).charAt(n.length-1)?n=n.substring(0,i-1):"%"===n.charAt(n.length-2)&&(n=n.substring(0,i-2))),"".concat(r).concat(n)}return r}Object(t.e)("userId",a)}},[442]);