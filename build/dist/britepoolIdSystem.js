pbjsChunk([332],{330:function(e,r,t){e.exports=t(331)},331:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t.d(r,"britepoolIdSubmodule",function(){return f});var c=t(0),s=t(4),o=t(11);function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}var f={name:"britepoolId",decode:function(e){return e&&"string"==typeof e.primaryBPID?{britepoolid:e.primaryBPID}:null},getId:function(e,r){var t=e&&e.params||{},o=f.createParams(t,r),n=o.params,i=o.headers,a=o.url,u=o.getter,p=o.errors,l=null;return"function"==typeof u&&"function"!=typeof(l=u(n))?{id:f.normalizeValue(l)}:(c.isEmpty(n)&&c.triggerPixel("https://px.britepool.com/new?partner_id=t"),{callback:function(t){if(0<p.length)return p.forEach(function(e){return c.logError(e)}),void t();if(l)try{l(function(e){t(f.normalizeValue(e))})}catch(e){""!==e&&c.logError(e),t()}else Object(s.a)(a,{success:function(e){var r=f.normalizeValue(e);t(r?{primaryBPID:r.primaryBPID}:null)},error:function(e){""!==e&&c.logError(e),t()}},JSON.stringify(n),{customHeaders:i,contentType:"application/json",method:"POST",withCredentials:!0})}})},createParams:function(e,r){var t=r&&"boolean"==typeof r.gdprApplies&&r.gdprApplies?r.consentString:void 0,o=[],n={},i=p({},e,"undefined"!=typeof britepool_pubparams?britepool_pubparams:{});if(i.getter){if("function"!=typeof i.getter)return o.push("userIdTargeting - britepoolId submodule requires getter to be a function"),{errors:o}}else i.api_key&&(n["x-api-key"]=i.api_key);var a=i.url||"https://api.britepool.com/v1/britepool/id".concat(t?"?gdprString="+encodeURIComponent(t):""),u=i.getter;return delete i.api_key,delete i.url,delete i.getter,{params:i,headers:n,url:a,getter:u,errors:o}},normalizeValue:function(e){var r=null;if("object"===n(e))r=e;else if("string"==typeof e)try{r=JSON.parse(e)}catch(e){c.logError(e)}return r}};Object(o.e)("userId",f)}},[330]);