pbjsChunk([181],{687:function(e,t,r){e.exports=r(688)},688:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"spec",function(){return k}),t.injectAdIdsIntoAllBidResponses=s,t.checkDeepArray=d,t.defaultSize=_,t.ozoneGetWinnerForRequestBid=j,t.ozoneGetAllBidsForBidId=q,t.getRoundedBid=z,t.getGranularityKeyName=u,t.getGranularityObject=p,t.ozoneAddStandardProperties=C,t.getWidthAndHeightFromVideoObject=O,t.playerSizeIsNestedArray=D;var R=r(0),i=r(1),T=r(2),w=r(3),c=r(45),P=r(12);function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o="https://elb.the-ozone-project.com",n="/openrtb2/auction",a="/static/load-cookie.html",E="2.5.0",k={gvlid:524,aliases:[{code:"lmc"}],version:E,code:"ozone",supportedMediaTypes:[T.d,T.b],cookieSyncBag:{publisherId:null,siteId:null,userIdObject:{}},propertyBag:{pageId:null,buildRequestsStart:0,buildRequestsEnd:0},whitelabel_defaults:{logId:"OZONE",bidder:"ozone",keyPrefix:"oz",auctionUrl:o+n,cookieSyncUrl:o+a,rendererUrl:"https://prebid.the-ozone-project.com/ozone-renderer.js"},loadWhitelabelData:function(e){var t,r;this.propertyBag.whitelabel||(this.propertyBag.whitelabel=JSON.parse(JSON.stringify(this.whitelabel_defaults)),t=e.bidder||"ozone",this.propertyBag.whitelabel.logId=t.toUpperCase(),this.propertyBag.whitelabel.bidder=t,(r=w.b.getConfig(t)||{}).kvpPrefix&&(this.propertyBag.whitelabel.keyPrefix=r.kvpPrefix),r.endpointOverride&&(r.endpointOverride.origin&&(this.propertyBag.whitelabel.auctionUrl=r.endpointOverride.origin+n,this.propertyBag.whitelabel.cookieSyncUrl=r.endpointOverride.origin+a),r.endpointOverride.rendererUrl&&(this.propertyBag.whitelabel.rendererUrl=r.endpointOverride.rendererUrl)),this.logInfo("set propertyBag.whitelabel to",this.propertyBag.whitelabel))},getAuctionUrl:function(){return this.propertyBag.whitelabel.auctionUrl},getCookieSyncUrl:function(){return this.propertyBag.whitelabel.cookieSyncUrl},getRendererUrl:function(){return this.propertyBag.whitelabel.rendererUrl},logInfo:function(e){var t;this.propertyBag.whitelabel&&((t=arguments)[0]="".concat(this.propertyBag.whitelabel.logId,": ").concat(e),R.logInfo.apply(this,t))},logError:function(e){var t;this.propertyBag.whitelabel&&((t=arguments)[0]="".concat(this.propertyBag.whitelabel.logId,": ").concat(e),R.logError.apply(this,t))},logWarn:function(e){var t;this.propertyBag.whitelabel&&((t=arguments)[0]="".concat(this.propertyBag.whitelabel.logId,": ").concat(e),R.logWarn.apply(this,t))},isBidRequestValid:function(e){this.loadWhitelabelData(e),this.logInfo("isBidRequestValid : ",w.b.getConfig(),e);var t=e.adUnitCode;if(!e.params.hasOwnProperty("placementId"))return this.logError("BID ADAPTER VALIDATION FAILED : missing placementId : siteId, placementId and publisherId are REQUIRED",t),!1;if(!this.isValidPlacementId(e.params.placementId))return this.logError("BID ADAPTER VALIDATION FAILED : placementId must be exactly 10 numeric characters",t),!1;if(!e.params.hasOwnProperty("publisherId"))return this.logError("BID ADAPTER VALIDATION FAILED : missing publisherId : siteId, placementId and publisherId are REQUIRED",t),!1;if(!e.params.publisherId.toString().match(/^[a-zA-Z0-9\-]{12}$/))return this.logError("BID ADAPTER VALIDATION FAILED : publisherId must be exactly 12 alphanumieric characters including hyphens",t),!1;if(!e.params.hasOwnProperty("siteId"))return this.logError("BID ADAPTER VALIDATION FAILED : missing siteId : siteId, placementId and publisherId are REQUIRED",t),!1;if(!e.params.siteId.toString().match(/^[0-9]{10}$/))return this.logError("BID ADAPTER VALIDATION FAILED : siteId must be exactly 10 numeric characters",t),!1;if(e.params.hasOwnProperty("customParams"))return this.logError("BID ADAPTER VALIDATION FAILED : customParams should be renamed to customData",t),!1;if(e.params.hasOwnProperty("customData")){if(!Array.isArray(e.params.customData))return this.logError("BID ADAPTER VALIDATION FAILED : customData is not an Array",t),!1;if(e.params.customData.length<1)return this.logError("BID ADAPTER VALIDATION FAILED : customData is an array but does not contain any elements",t),!1;if(!e.params.customData[0].hasOwnProperty("targeting"))return this.logError('BID ADAPTER VALIDATION FAILED : customData[0] does not contain "targeting"',t),!1;if("object"!=x(e.params.customData[0].targeting))return this.logError("BID ADAPTER VALIDATION FAILED : customData[0] targeting is not an object",t),!1}if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(T.d)){if(!e.mediaTypes[T.d].hasOwnProperty("context"))return this.logError("No video context key/value in bid. Rejecting bid: ",e),!1;if("instream"!==e.mediaTypes[T.d].context&&"outstream"!==e.mediaTypes[T.d].context)return this.logError("video.context is invalid. Only instream/outstream video is supported. Rejecting bid: ",e),!1}return!0},isValidPlacementId:function(e){return e.toString().match(/^[0-9]{10}$/)},buildRequests:function(e,r){var s=this;this.loadWhitelabelData(e[0]),this.propertyBag.buildRequestsStart=(new Date).getTime();var d=this.propertyBag.whitelabel.bidder,t=this.propertyBag.whitelabel.keyPrefix;if(this.logInfo("buildRequests time: ".concat(this.propertyBag.buildRequestsStart," v ").concat(E," validBidRequests"),JSON.parse(JSON.stringify(e)),"bidderRequest",JSON.parse(JSON.stringify(r))),this.blockTheRequest())return[];var i={publisherId:"",siteId:""};0<e.length&&(this.cookieSyncBag.userIdObject=B(this.cookieSyncBag.userIdObject,this.findAllUserIds(e[0])),this.cookieSyncBag.siteId=R.deepAccess(e[0],"params.siteId"),this.cookieSyncBag.publisherId=R.deepAccess(e[0],"params.publisherId"),i=e[0].params),this.logInfo("cookie sync bag",this.cookieSyncBag);var o=!1!==(o=this.getWhitelabelConfigItem("ozone.singleRequest"));this.logInfo("config ".concat(d,".singleRequest : "),o);var n,a={};delete a.test,r&&r.gdprConsent?(this.logInfo("ADDING GDPR info"),n=r.gdprConsent.apiVersion||"1",a.regs={ext:{gdpr:r.gdprConsent.gdprApplies?1:0,apiVersion:n}},a.regs.ext.gdpr?(a.user=a.user||{},a.user.ext={consent:r.gdprConsent.consentString}):this.logInfo("**** Strange CMP info: bidderRequest.gdprConsent exists BUT bidderRequest.gdprConsent.gdprApplies is false. See bidderRequest logged above. ****")):this.logInfo("WILL NOT ADD GDPR info; no bidderRequest.gdprConsent object was present.");var l=this.getGetParametersAsObject(),c=t+"testmode",u=l[c]||null;a.device={w:window.innerWidth,h:window.innerHeight};var p,g=this.getPlacementIdOverrideFromGetParam(),h=e.map(function(e){var t={},r=g||s.getPlacementId(e);t.id=e.bidId,t.tagid=r,t.secure="https:"===window.location.protocol?1:0;var i,o,n=[];if(e.hasOwnProperty("mediaTypes")?(e.mediaTypes.hasOwnProperty(T.b)&&(n=e.mediaTypes[T.b].sizes,s.logInfo("setting banner size from the mediaTypes.banner element for bidId "+t.id+": ",n)),e.mediaTypes.hasOwnProperty(T.d)&&(s.logInfo("openrtb 2.5 compliant video"),"object"==x(e.mediaTypes[T.d])&&(i=R.deepAccess(e,"params.video",{}),t.video=s.unpackVideoConfigIntoIABformat(e.mediaTypes[T.d],i),t.video=s.addVideoDefaults(t.video,e.mediaTypes[T.d],i)),o=O(t.video),s.logInfo("setting video object from the mediaTypes.video element: "+t.id+":",t.video,"wh=",o),o&&"object"===x(o)?(t.video.w=o.w,t.video.h=o.h,D(t.video)?(s.logInfo("setting obj.video.format to be an array of objects"),t.video.ext.format=[o]):(s.logInfo("setting obj.video.format to be an object"),t.video.ext.format=o)):s.logWarn("cannot set w, h & format values for video; the config is not right")),e.mediaTypes.hasOwnProperty(T.c)&&(t.native=e.mediaTypes[T.c],s.logInfo("setting native object from the mediaTypes.native element: "+t.id+":",t.native))):e.hasOwnProperty("sizes")?(s.logInfo("no mediaTypes detected - will use the sizes array in the config root"),n=e.sizes):s.logInfo("no mediaTypes detected, no sizes array in the config root either. Cannot set sizes for banner type"),0<n.length&&(t.banner={topframe:1,w:n[0][0]||0,h:n[0][1]||0,format:n.map(function(e){return{w:e[0],h:e[1]}})}),t.placementId=r,t.ext={prebid:{storedrequest:{id:r}}},t.ext[d]={},t.ext[d].adUnitCode=e.adUnitCode,t.ext[d].transactionId=e.transactionId,e.params.hasOwnProperty("customData")&&(t.ext[d].customData=e.params.customData),s.logInfo("obj.ext.".concat(d," is "),t.ext[d]),null!=u)if(s.logInfo("setting isTestMode to ",u),t.ext[d].hasOwnProperty("customData"))for(var a=0;a<t.ext[d].customData.length;a++)t.ext[d].customData[a].targeting[c]=u;else t.ext[d].customData=[{settings:{},targeting:{}}],t.ext[d].customData[0].targeting[c]=u;return t}),f={};f[d]={},f[d][t+"_pb_v"]=E,f[d][t+"_rw"]=g?1:0,0<e.length&&((p=this.cookieSyncBag.userIdObject).hasOwnProperty("pubcid")&&(f[d].pubcid=p.pubcid)),f[d].pv=this.getPageId();var b=this.getWhitelabelConfigItem("ozone.oz_omp_floor");this.logInfo("".concat(t,"_omp_floor dollar value = "),b),"number"==typeof b?f[d][t+"_omp_floor"]=b:void 0!==b&&this.logError("".concat(t,"_omp_floor is invalid - IF SET then this must be a number, representing dollar value eg. ").concat(t,"_omp_floor: 1.55. You have it set as a ")+x(b));var I=this.getWhitelabelConfigItem("ozone.oz_whitelist_adserver_keys"),m=R.isArray(I)&&0<I.length;f[d][t+"_kvp_rw"]=m?1:0,"ozone"!=d&&(this.logInfo("setting aliases object"),f.prebid={aliases:{ozone:d}});var y=this.generateEids(e);if(a.site={publisher:{id:i.publisherId},page:document.location.href,id:i.siteId},a.test=l.hasOwnProperty("pbjs_debug")&&"true"===l.pbjs_debug?1:0,!0===w.b.getConfig("coppa")&&R.deepSetValue(a,"regs.coppa",1),o){this.logInfo("buildRequests starting to generate response for a single request"),a.id=r.auctionId,a.auctionId=r.auctionId,a.imp=h,a.ext=f,a.source={tid:r.auctionId},R.deepSetValue(a,"user.ext.eids",y);var v={method:"POST",url:this.getAuctionUrl(),data:JSON.stringify(a),bidderRequest:r};return this.logInfo("buildRequests request data for single = ",a),this.propertyBag.buildRequestsEnd=(new Date).getTime(),this.logInfo("buildRequests going to return for single at time ".concat(this.propertyBag.buildRequestsEnd," (took ").concat(this.propertyBag.buildRequestsEnd-this.propertyBag.buildRequestsStart,"ms): "),v),v}var A=h.map(function(e){s.logInfo("buildRequests starting to generate non-single response, working on imp : ",e);var t=B({},a);return e.ext[d].pageAuctionId=r.auctionId,t.id=e.ext[d].transactionId,t.auctionId=e.ext[d].transactionId,t.imp=[e],t.ext=f,t.source={tid:e.ext[d].transactionId},R.deepSetValue(t,"user.ext.eids",y),s.logInfo("buildRequests RequestSingle (for non-single) = ",t),{method:"POST",url:s.getAuctionUrl(),data:JSON.stringify(t),bidderRequest:r}});return this.propertyBag.buildRequestsEnd=(new Date).getTime(),this.logInfo("buildRequests going to return for non-single at time ".concat(this.propertyBag.buildRequestsEnd," (took ").concat(this.propertyBag.buildRequestsEnd-this.propertyBag.buildRequestsStart,"ms): "),A),A},interpretResponse:function(h,f){var b=this;f&&f.bidderRequest&&f.bidderRequest.bids&&this.loadWhitelabelData(f.bidderRequest.bids[0]);var e=(new Date).getTime(),I=this.propertyBag.whitelabel.bidder,m=this.propertyBag.whitelabel.keyPrefix;if(this.logInfo("interpretResponse time: ".concat(e," . Time between buildRequests done and interpretResponse start was ").concat(e-this.propertyBag.buildRequestsEnd,"ms")),this.logInfo("serverResponse, request",JSON.parse(JSON.stringify(h)),JSON.parse(JSON.stringify(f))),!(h=h.body||{}).hasOwnProperty("seatbid"))return[];if("object"!==x(h.seatbid))return[];var y=[],v=this.getWhitelabelConfigItem("ozone.enhancedAdserverTargeting");this.logInfo("enhancedAdserverTargeting",v),void 0===v&&(v=!0),this.logInfo("enhancedAdserverTargeting",v),h.seatbid=s(h.seatbid),h.seatbid=this.removeSingleBidderMultipleBids(h.seatbid);for(var A=this.getWhitelabelConfigItem("ozone.oz_omp_floor"),w="number"==typeof A,B=this.getWhitelabelConfigItem("ozone.oz_whitelist_adserver_keys"),O=R.isArray(B)&&0<B.length,D=0;D<h.seatbid.length;D++)for(var S=h.seatbid[D],t=function(e){var t=b.getBidRequestForBidId(S.bid[e].impid,f.bidderRequest.bids);b.logInfo("seatbid:".concat(D,", bid:").concat(e," Going to set default w h for seatbid/bidRequest"),S.bid[e],t);var r=_(t),i=r.defaultWidth,o=r.defaultHeight,n=C(S.bid[e],i,o),a=null,s=!1,d=R.deepAccess(n,"ext.prebid.type");b.logInfo("this bid type is : ".concat(d),e),d===T.d&&(s=!0,"outstream"===(a=b.getVideoContextForBidId(n.bidId,f.bidderRequest.bids))?(b.logInfo("going to attach a renderer to OUTSTREAM video : ",e),n.renderer=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=window.ozoneVideo;k.logInfo("newRenderer going to set loaded to ".concat(r?"true":"false"));var i=P.a.install({url:k.getRendererUrl(),config:t,loaded:r,adUnitCode:e});try{i.setRender(V)}catch(e){k.logError("Prebid Error when calling setRender on renderer",JSON.parse(JSON.stringify(i)),e)}return i}(n.bidId)):b.logInfo("bid is not an outstream video, will not attach a renderer: ",e));var l,c={};v?(l=q(n.bidId,h.seatbid),b.logInfo("Going to iterate allBidsForThisBidId",l),Object.keys(l).forEach(function(e,t,r){b.logInfo("adding adserverTargeting for ".concat(e," for bidId ").concat(n.bidId)),c[m+"_"+e]=e,c[m+"_"+e+"_crid"]=String(l[e].crid),c[m+"_"+e+"_adv"]=String(l[e].adomain),c[m+"_"+e+"_adId"]=String(l[e].adId),c[m+"_"+e+"_pb_r"]=z(l[e].price,l[e].ext.prebid.type),l[e].hasOwnProperty("dealid")&&(c[m+"_"+e+"_dealid"]=String(l[e].dealid)),w&&(c[m+"_"+e+"_omp"]=l[e].price>=A?"1":"0"),s&&(c[m+"_"+e+"_vid"]=a);var i=R.deepAccess(l[e],"ext.bidder.".concat(I,".floor"),null);null!=i&&(c[m+"_"+e+"_flr"]=i);var o=R.deepAccess(l[e],"ext.bidder.".concat(I,".ruleId"),null);null!=o&&(c[m+"_"+e+"_rid"]=o),e.match(/^ozappnexus/)&&(c[m+"_"+e+"_sid"]=String(l[e].cid))})):O?b.logWarn("You have set a whitelist of adserver keys but this will be ignored because ".concat(I,".enhancedAdserverTargeting is set to false. No per-bid keys will be sent to adserver.")):b.logInfo("".concat(I,".enhancedAdserverTargeting is set to false, so no per-bid keys will be sent to adserver."));var u=j(n.bidId,h.seatbid),p=u.seat,g=u.bid;c[m+"_auc_id"]=String(f.bidderRequest.auctionId),c[m+"_winner"]=String(p),v&&(c[m+"_imp_id"]=String(g.impid),c[m+"_pb_v"]=E),O&&(b.logInfo("Going to filter out adserver targeting keys not in the whitelist: ",B),Object.keys(c).forEach(function(e){-1===B.indexOf(e)&&delete c[e]})),n.adserverTargeting=c,y.push(n)},r=0;r<S.bid.length;r++)t(r);var i=(new Date).getTime();return this.logInfo("interpretResponse going to return at time ".concat(i," (took ").concat(i-e,"ms) Time from buildRequests Start -> interpretRequests End = ").concat(i-this.propertyBag.buildRequestsStart,"ms"),y),y},getWhitelabelConfigItem:function(e){if("ozone"==this.propertyBag.whitelabel.bidder)return w.b.getConfig(e);var t=e.replace("ozone",this.propertyBag.whitelabel.bidder),t=e.replace("oz_",this.propertyBag.whitelabel.keyPrefix+"_");return w.b.getConfig(t)},removeSingleBidderMultipleBids:function(e){for(var t=[],r=0;r<e.length;r++){for(var i=e[r],o={seat:i.seat,bid:[]},n=[],a=0;a<i.bid.length;a++){var s=i.bid[a];if(!R.contains(n,s.impid)){n.push(s.impid);for(var d=a+1;d<i.bid.length;d++)i.bid[d].impid===s.impid&&i.bid[d].price>s.price&&(s=i.bid[d]);o.bid.push(s)}}t.push(o)}return t},getUserSyncs:function(e,t,r){if(this.logInfo("getUserSyncs optionsType, serverResponse, gdprConsent, cookieSyncBag",e,t,r,this.cookieSyncBag),!t||0===t.length)return[];if(e.iframeEnabled){var i=[];document.location.search.match(/pbjs_debug=true/)&&i.push("pbjs_debug=true"),i.push("gdpr="+(R.deepAccess(r,"gdprApplies",!1)?"1":"0")),i.push("gdpr_consent="+R.deepAccess(r,"consentString",""));var o=Object.getOwnPropertyNames(this.cookieSyncBag.userIdObject);for(var n in o){var a=o[n];i.push(a+"="+this.cookieSyncBag.userIdObject[a])}i.push("publisherId="+this.cookieSyncBag.publisherId),i.push("siteId="+this.cookieSyncBag.siteId),i.push("cb="+Date.now()),i.push("bidder="+this.propertyBag.whitelabel.bidder);var s=i.join("&");return 0<s.length&&(s="?"+s),this.logInfo("getUserSyncs going to return cookie sync url : "+this.getCookieSyncUrl()+s),[{type:"iframe",url:this.getCookieSyncUrl()+s}]}},getBidRequestForBidId:function(e,t){for(var r=0;r<t.length;r++)if(t[r].bidId===e)return t[r];return null},getVideoContextForBidId:function(e,t){var r=this.getBidRequestForBidId(e,t);return null!=r?R.deepAccess(r,"mediaTypes.video.context","unknown"):null},findAllUserIds:function(e){var t,r={},i=["pubcid","tdid","id5id","parrableId","idl_env","criteoId","criteortus","sharedid","lotamePanoramaId","fabrickId"];if(e.hasOwnProperty("userId")){for(var o in i){var n=i[o];e.userId.hasOwnProperty(n)&&("string"==typeof e.userId[n]?r[n]=e.userId[n]:"object"==x(e.userId[n])?r[n]=e.userId[n][Object.keys(e.userId[n])[0]]:this.logError("failed to get string key value for userId : ".concat(n)))}var a=R.deepAccess(e.userId,"lipb.lipbid");a&&(r.lipb={lipbid:a})}return r.hasOwnProperty("pubcid")||(t=R.deepAccess(e,"crumbs.pubcid"))&&(r.pubcid=t),r},getPlacementId:function(e){return e.params.placementId.toString()},getPlacementIdOverrideFromGetParam:function(){var e=this.propertyBag.whitelabel.keyPrefix,t=this.getGetParametersAsObject();if(t.hasOwnProperty(e+"storedrequest")){if(this.isValidPlacementId(t[e+"storedrequest"]))return this.logInfo("using GET ".concat(e,"storedrequest ")+t[e+"storedrequest"]+" to replace placementId"),t[e+"storedrequest"];this.logError("GET ".concat(e,"storedrequest FAILED VALIDATION - will not use it"))}return null},generateEids:function(e){var t,r=e[0];return r&&r.userId&&(t=r.userIdAsEids,this.handleTTDId(t,e)),t},handleTTDId:function(e,t){var r=null,i=w.b.getConfig("adsrvrOrgId");R.isStr(R.deepAccess(t,"0.userId.tdid"))?r=t[0].userId.tdid:i&&R.isStr(i.TDID)&&(r=i.TDID),null!==r&&e.push({source:"adserver.org",uids:[{id:r,atype:1,ext:{rtiPartner:"TDID"}}]})},getGetParametersAsObject:function(){for(var e,t=location.search.substr(1).split("&"),r={},i=0;i<t.length;i++)r[(e=t[i].split("="))[0]]=e[1];return r},blockTheRequest:function(){var e=this.getWhitelabelConfigItem("ozone.oz_request");return"boolean"==typeof e&&!e&&(this.logWarn("Will not allow auction : ".concat(this.propertyBag.whitelabel.keyPrefix,"one.").concat(this.propertyBag.whitelabel.keyPrefix,"_request is set to false")),!0)},getPageId:function(){if(null==this.propertyBag.pageId){for(var e="",t=20;0<t;t--)e+="0123456789abcdefghijklmnopqrstuvwxyz"[Math.floor(36*Math.random())];this.propertyBag.pageId=(new Date).getTime()+"_"+e}return this.propertyBag.pageId},unpackVideoConfigIntoIABformat:function(e,t){var r={ext:{}},r=this._unpackVideoConfigIntoIABformat(r,e);return this._unpackVideoConfigIntoIABformat(r,t)},_unpackVideoConfigIntoIABformat:function(r,i){var o,e=["mimes","minduration","maxduration","protocols","w","h","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype"];for(var t in i){!function(t){o=!1,e.forEach(function(e){e===t&&(r[t]=i[t],o=!0)}),o||(r.ext[t]=i[t])}(t)}return i.hasOwnProperty("ext")&&"object"===x(i.ext)&&(i.hasOwnProperty("ext")?r.ext=R.mergeDeep(r.ext,i.ext):r.ext=i.ext),r},addVideoDefaults:function(e,t,r){return e=this._addVideoDefaults(e,t,!1),e=this._addVideoDefaults(e,r,!0)},_addVideoDefaults:function(e,t,r){var i=R.deepAccess(t,"context");"outstream"===i?e.placement=3:"instream"===i&&(e.placement=1);var o=R.deepAccess(t,"skippable",null);return(null!=o||r&&!e.hasOwnProperty("skip"))&&(e.skip=o?1:0),e}};function s(e){k.logInfo("injectAdIdsIntoAllBidResponses",e);for(var t=0;t<e.length;t++)for(var r=e[t],i=0;i<r.bid.length;i++)r.bid[i].adId="".concat(r.bid[i].impid,"-").concat(t,"-").concat(i);return e}function d(e){return Array.isArray(e)&&Array.isArray(e[0])?e[0]:e}function _(e){if(!e)return k.logInfo("defaultSize received empty bid obj! going to return fixed default size"),{defaultHeight:250,defaultWidth:300};var t=e.sizes,r={};return r.defaultWidth=d(t)[0],r.defaultHeight=d(t)[1],r}function j(e,t){for(var r=null,i=null,o=0;o<t.length;o++)for(var n=t[o].bid,a=t[o].seat,s=0;s<n.length;s++)if(n[s].impid===e&&(null==r||r.price<n[s].price)){r=n[s],i=a;break}return{seat:i,bid:r}}function q(e,t){for(var r={},i=0;i<t.length;i++)for(var o=t[i].bid,n=t[i].seat,a=0;a<o.length;a++)o[a].impid===e&&(!r.hasOwnProperty(n)||r[n].price<o[a].price)&&(r[n]=o[a]);return r}function z(e,t){var r=w.b.getConfig("mediaTypePriceGranularity.".concat(t)),i=w.b.getConfig("customPriceBucket"),o=w.b.getConfig("priceGranularity"),n=p(0,r,o,i),a=u(0,r,o);k.logInfo("getRoundedBid. price:",e,"mediaType:",t,"configkey:",a,"configObject:",n,"mediaTypeGranularity:",r,"strBuckets:",o);var s=Object(c.a)(e,n,w.b.getConfig("currency.granularityMultiplier"));k.logInfo("priceStringsObj",s);var d={medium:"med",custom:"custom",high:"high",low:"low",dense:"dense"};if(d.hasOwnProperty(a)){var l=d[a];return k.logInfo("getRoundedBid: looking for priceStringsKey:",l),s[l]}return s.auto}function u(e,t,r){return"string"==typeof t?t:"object"===x(t)?"custom":"string"==typeof r?r:"auto"}function p(e,t,r,i){return"object"===x(t)?t:"custom"===r?i:""}function C(e,t,r){return e.cpm=e.price,e.bidId=e.impid,e.requestId=e.impid,e.width=e.w||t,e.height=e.h||r,e.ad=e.adm,e.netRevenue=!0,e.creativeId=e.crid,e.currency="USD",e.ttl=300,e}function O(e){var t=l(e);return t?t[0]&&"object"===x(t[0])&&(k.logInfo("getWidthAndHeightFromVideoObject found nested array inside playerSize.",t[0]),"number"!=typeof(t=t[0])[0]&&"string"!=typeof t[0])?(k.logInfo("getWidthAndHeightFromVideoObject found non-number/string type inside the INNER array in playerSize. This is totally wrong - cannot continue.",t[0]),null):2!==t.length?(k.logInfo("getWidthAndHeightFromVideoObject found playerSize with length of "+t.length+". This is totally wrong - cannot continue."),null):{w:t[0],h:t[1]}:null}function D(e){var t=l(e);return!t||t.length<1?null:t[0]&&"object"===x(t[0])}function l(e){k.logInfo("getPlayerSizeFromObject received object",e);var t=R.deepAccess(e,"playerSize");return(t=t||R.deepAccess(e,"ext.playerSize"))?"object"!==x(t)?(k.logError("getPlayerSizeFromObject FAILED: playerSize is not an object/array",e),null):t:(k.logError("getPlayerSizeFromObject FAILED: no playerSize in video object or ext",e),null)}function V(e){k.logInfo("outstreamRender called. Going to push the call to window.ozoneVideo.outstreamRender(bid) bid =",JSON.parse(JSON.stringify(e))),e.renderer.push(function(){window.ozoneVideo.outstreamRender(e)})}Object(i.registerBidder)(k),R.logInfo("*BidAdapter ".concat(E," was loaded"))}},[687]);