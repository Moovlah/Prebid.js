pbjsChunk([308],{387:function(e,r,n){e.exports=n(388)},388:function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),n.d(r,"spec",function(){return I});var h=n(0),t=n(1),f=n(2),y=n(3);function b(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}var I={code:"cpmstar",supportedMediaTypes:[f.b,f.d],pageID:Math.floor(1e7*Math.random()),getMediaType:function(e){return null!=e&&h.deepAccess(e,"mediaTypes.video")?f.d:f.b},getPlayerSize:function(e){var r=h.deepAccess(e,"mediaTypes.video.playerSize");return null==r?[640,440]:(null!=r[0]&&(r=r[0]),null==r||null==r[0]||null==r[1]?[640,440]:r)},isBidRequestValid:function(e){return"string"==typeof e.params.placementId&&!!e.params.placementId.length||"number"==typeof e.params.placementId},buildRequests:function(e,r){for(var n=[],t=0;t<e.length;t++){var a=e[t],d=encodeURIComponent(r.refererInfo.referer),i=h.getBidIdParameter("endpoint",a.params),s="dev"==i?"https://dev.server.cpmstar.com/view.aspx":"staging"==i?"https://staging.server.cpmstar.com/view.aspx":"https://server.cpmstar.com/view.aspx",o=I.getMediaType(a),p=I.getPlayerSize(a),c="&fv=0"+(p?"&w="+p[0]+"&h="+p[1]:""),l=s+"?media="+o+(o==f.d?c:"")+"&json=c_b&mv=1&poolid="+h.getBidIdParameter("placementId",a.params)+"&reachedTop="+encodeURIComponent(r.refererInfo.reachedTop)+"&requestid="+a.bidId+"&referer="+encodeURIComponent(d);if(a.schain&&a.schain.nodes){var u=a.schain,g="";g+=u.ver+","+u.complete;for(var v=0;v<u.nodes.length;v++){var m=u.nodes[v];g+="!"+b(m.asi||"")+","+b(m.sid||"")+","+b(m.hp||"")+","+b(m.rid||"")+","+b(m.name||"")+","+b(m.domain||"")}l+="&schain="+g}r.gdprConsent&&(null!=r.gdprConsent.consentString&&(l+="&gdpr_consent="+r.gdprConsent.consentString),null!=r.gdprConsent.gdprApplies&&(l+="&gdpr="+(r.gdprConsent.gdprApplies?1:0))),null!=r.uspConsent&&(l+="&us_privacy="+r.uspConsent),y.b.getConfig("coppa")&&(l+="&tfcd="+(y.b.getConfig("coppa")?1:0)),n.push({method:"GET",url:l,bidRequest:a})}return n},interpretResponse:function(e,r){var n=r.bidRequest,t=I.getMediaType(n),a=[];Array.isArray(e.body)||(e.body=[e.body]);for(var d=0;d<e.body.length;d++){var i=e.body[d].creatives[0];if(!i)return void h.logWarn("cpmstarBidAdapter: server response failed check");var s=parseFloat(i.cpm)||0;if(!s)return void h.logWarn("cpmstarBidAdapter: server response failed check. Missing cpm");var o={requestId:i.requestid,cpm:s,width:i.width||0,height:i.height||0,currency:i.currency?i.currency:"USD",netRevenue:!i.netRevenue||i.netRevenue,ttl:i.ttl?i.ttl:300,creativeId:i.creativeid||0};if(i.hasOwnProperty("dealId")&&(o.dealId=i.dealId),t==f.b&&i.code)o.ad=i.code+(i.px_cr?"\n<img width=0 height=0 src='"+i.px_cr+"' />":"");else{if(t!=f.d||!i.creativemacros||!i.creativemacros.HTML5VID_VASTSTRING)return h.logError("bad response",i);var p=I.getPlayerSize(n);null!=p&&(o.width=p[0],o.height=p[1]),o.mediaType=f.d,o.vastXml=i.creativemacros.HTML5VID_VASTSTRING}a.push(o)}return a},getUserSyncs:function(e,r){var n=[];if(0==r.length||!r[0].body)return n;var t=r[0].body[0].syncs;if(!t||t.length<0)return n;for(var a=0;a<t.length;a++){var d=t[a];("image"===d.type&&e.pixelEnabled||"iframe"==d.type&&e.iframeEnabled)&&n.push(d)}return n}};Object(t.registerBidder)(I)}},[387]);